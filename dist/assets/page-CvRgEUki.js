import{j as e,r as n}from"./index-QfV4rlQB.js";import{C as ye}from"./ComponentContainerCard-Bxhh8ezo.js";import{P as ve}from"./PageTitle-DEYYPHnZ.js";import{M as C}from"./Modal-B8KEgnd3.js";import{B as we}from"./Button-gXWlZ2aE.js";import{C as z,p as B}from"./campaignContentsService-C-3q-UIb.js";import{C as Ie}from"./campaignAnalyticsService-Cknd4Itn.js";import{f as m}from"./numberFormat-yIx-nKgv.js";import"./Card-DPjYn8v6.js";import"./IconifyIcon-DyVxtpEY.js";import"./AbstractModalHeader-DLMlqN-a.js";import"./useWindow-CGrW3Y6I.js";import"./usePrevious-DgV523th.js";import"./useEventCallback-FZZhbd0Y.js";import"./hasClass-cVq6v5Ic.js";import"./useMergedRefs-BQtfrCW5.js";import"./NoopTransition-C-mlqx5z.js";import"./DataKey-COGXBUcQ.js";import"./Button-CGAp_rTL.js";import"./api-ClkYFUjX.js";const Me=({show:H,onHide:D,interactions:x,loading:h=!1})=>{const d=r=>{const f=Date.now()/1e3,l=Math.floor(f-r);return l<60?"now":l<3600?`${Math.floor(l/60)}m`:l<86400?`${Math.floor(l/3600)}h`:l<604800?`${Math.floor(l/86400)}d`:`${Math.floor(l/604800)}w`},g=r=>{const f=r.target;f.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(f.alt||"User")}&background=e3f2fd&color=1976d2&size=40`};return e.jsxs(C,{show:H,onHide:D,size:"lg",centered:!0,className:"instagram-comments-modal",children:[e.jsx(C.Header,{closeButton:!0,className:"border-0 pb-2",children:e.jsxs(C.Title,{className:"fs-5 fw-semibold",children:["Comments (",x.length,")"]})}),e.jsx(C.Body,{className:"p-0",children:h?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"text-muted mt-2",children:"Loading comments..."})]}):x.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-comment-alt text-muted mb-3",style:{fontSize:"3rem"}}),e.jsx("p",{className:"text-muted mb-0",children:"No comments yet"})]}):e.jsx("div",{className:"comments-container",children:x.map(r=>e.jsxs("div",{className:"comment-item",children:[e.jsxs("div",{className:"comment-avatar",children:[e.jsx("img",{src:r.owner.profile_pic_url,alt:r.owner.username,className:"avatar-img",onError:g}),r.owner.is_verified&&e.jsx("div",{className:"verified-badge",children:e.jsx("i",{className:"fas fa-check"})})]}),e.jsxs("div",{className:"comment-content",children:[e.jsx("div",{className:"comment-header",children:e.jsxs("div",{className:"comment-user-info",children:[e.jsx("span",{className:"username",children:r.owner.username}),r.owner.is_verified&&e.jsx("i",{className:"fas fa-check-circle verified-icon"}),e.jsx("span",{className:"comment-time",children:d(r.created_timestamp)})]})}),e.jsx("div",{className:"comment-text",children:r.comment_text}),e.jsxs("div",{className:"comment-meta",children:[e.jsxs("div",{className:"comment-actions",children:[e.jsx("button",{className:"action-btn"}),e.jsx("button",{className:"action-btn"})]}),e.jsx("div",{className:"comment-details"})]})]})]},r._id))})}),e.jsx(C.Footer,{className:"border-0 pt-0",children:e.jsx(we,{variant:"outline-secondary",onClick:D,children:"Close"})})]})},Ye=()=>{var q;const[H,D]=n.useState(""),[x,h]=n.useState([]),[d,g]=n.useState(!0),[r,f]=n.useState(null),[l,I]=n.useState("all"),[de,oe]=n.useState("all"),[j,M]=n.useState(1),[u]=n.useState(8),[F,W]=n.useState(0),[b,R]=n.useState(0),[A,y]=n.useState([]),[S,U]=n.useState(new Set),[L,Y]=n.useState(new Set),[N,Z]=n.useState(null),[me,O]=n.useState(!1),[he,k]=n.useState([]),[xe,Q]=n.useState(!1),ge=[{hashtag:"#foodie",posts:1245,reach:15e4,engagement:12500,impressions:2e5,platform:"Instagram",trending:!0},{hashtag:"#healthyeating",posts:892,reach:98e3,engagement:8900,impressions:145e3,platform:"Instagram",trending:!1},{hashtag:"#recipe",posts:2156,reach:18e4,engagement:15600,impressions:25e4,platform:"Facebook",trending:!0},{hashtag:"#cooking",posts:756,reach:85e3,engagement:7200,impressions:12e4,platform:"Twitter",trending:!1},{hashtag:"#nutrition",posts:623,reach:72e3,engagement:6100,impressions:95e3,platform:"LinkedIn",trending:!0}],V=[{value:"all",label:"All Hashtags",display:"All Hashtags"},{value:"onlydaawatnovember",label:"#onlydaawatnovember",display:"#onlydaawatnovember"},{value:"onlyricenovember",label:"#onlyricenovember",display:"#onlyricenovember"},{value:"riceyourawareness",label:"#riceyourawareness",display:"#riceyourawareness"}];n.useEffect(()=>{(async()=>{try{g(!0),f(null);const a={success:!0,data:{posts:[],total_count:677,total_pages:85},message:"Success"};let i,o,v=l,w=[];l==="all"&&(w=V.filter(c=>c.value!=="all").map(c=>c.value));try{l==="all"?i=await z.getMultipleHashtagsPerformance(w,1,u):i=await z.getCampaignContents(v,1,u),i!=null&&i.success||(i=a)}catch(c){console.error("Contents API Error:",c),i=a}try{if(l==="all"){const c=w.map((P,T)=>`hashtags[${T}]=${P}`).join("&"),p=await fetch(`https://apis.icubeswire.co/api/v1/campaign-contents/analysis?${c}`);if(!p.ok)throw new Error(`API call failed: ${p.status} ${p.statusText}`);o={success:!0,data:await p.json(),message:"Campaign analysis data retrieved successfully"}}else o=await z.getCampaignAnalysis(v)}catch(c){console.error("Analysis API Error:",c)}if(i!=null&&i.success&&i.data.posts){if(W(i.data.total_count||0),R(i.data.total_pages||0),y(i.data.posts),U(new Set),Y(new Set),i.data.posts.length>0){const c=B(i.data.posts,v);h([c])}else h([]);M(1)}else h([]),y([]),W(0),R(0),M(1);o!=null&&o.success?Z(o.data):Z(null)}catch(a){f("Failed to fetch some campaign data. Please try again."),console.error("General API Error:",a),h([]),y([]),Z(null)}finally{g(!1)}})()},[l,u,de]);const J=async()=>{if(!(j>=b||d))try{g(!0);const s=j+1,a=await z.getCampaignContents(l,s,u);if(a.success&&a.data.posts.length>0){const i=[...A,...a.data.posts];y(i);const o=B(i,l);h([o]),M(s)}}catch(s){console.error("Error loading more data:",s)}finally{g(!1)}},fe=s=>{U(a=>{const i=new Set(a);return i.has(s)?i.delete(s):i.add(s),i})},K=s=>{Y(a=>{const i=new Set(a);return i.has(s)?i.delete(s):i.add(s),i})},je=async s=>{if(!s){alert("Post ID is not available");return}Q(!0),O(!0),k([]);try{const a=await Ie.getPostInteractions(s);a.success?k(a.data.intractions||[]):(console.error("Failed to fetch interactions:",a.message||"Unknown error"),k([]))}catch(a){console.error("Error fetching post interactions:",a),k([])}finally{Q(!1)}},X=s=>{if(!s)return"";const a=s;return typeof a=="object"&&a[0]&&a[0].text?String(a[0].text):typeof a=="string"?a:""},G=s=>{if(s==null)return"0";if(typeof s=="number")return m(s);if(typeof s=="string"){const a=parseInt(s);return isNaN(a)?"0":m(a)}return typeof s=="object"?"0":m(Number(s)||0)},_=x.length>0?x:ge,Ne=_.reduce((s,a)=>s+a.reach,0),pe=_.reduce((s,a)=>s+a.engagement,0),ue=_.reduce((s,a)=>s+a.posts,0),be=_.filter(s=>s.trending).length;return e.jsxs(e.Fragment,{children:[e.jsx(ve,{title:"Hashtag Performance",subName:"Track hashtag effectiveness across platforms"}),e.jsxs("div",{className:"container-fluid",children:[d&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading campaign data..."})]})})}),r&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),r,e.jsx("button",{className:"btn btn-sm btn-outline-danger ms-3",onClick:()=>window.location.reload(),children:"Retry"})]})})}),!d&&e.jsx("div",{className:"row mb-4"}),!d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row mb-4"}),N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",children:e.jsx("div",{className:"card bg-success text-white border-0 shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-user-friends fa-2x mb-2 opacity-75"}),e.jsx("h4",{className:"mb-1 fw-bold",children:N.influencer_count}),e.jsx("p",{className:"mb-0 small",children:"Influencers"})]})})})}),e.jsx("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",children:e.jsx("div",{className:"card bg-primary text-white border-0 shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-file-alt fa-2x mb-2 opacity-75"}),e.jsx("h4",{className:"mb-1 fw-bold",children:N.post_count}),e.jsx("p",{className:"mb-0 small",children:"Total Posts"})]})})})}),e.jsx("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",children:e.jsx("div",{className:"card bg-info text-white border-0 shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-thumbs-up fa-2x mb-2 opacity-75"}),e.jsx("h4",{className:"mb-1 fw-bold",children:m(N.avg_likes)}),e.jsx("p",{className:"mb-0 small",children:"Avg Likes"})]})})})}),e.jsx("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",children:e.jsx("div",{className:"card bg-dark text-white border-0 shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-fire fa-2x mb-2 opacity-75"}),e.jsx("h4",{className:"mb-1 fw-bold",children:((q=N.er_distribution.find(s=>s.name==="Above 10"))==null?void 0:q.count)||0}),e.jsx("p",{className:"mb-0 small",children:"High ER (>10%)"})]})})})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-lg-3 col-md-6 mb-3",children:e.jsx("div",{className:"card border-0 shadow-sm",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:e.jsx("div",{className:"card-body text-white",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1 fw-bold",children:m(N.total_engagements)}),e.jsx("p",{className:"mb-0 opacity-75",children:"Total Engagements"}),e.jsx("small",{className:"opacity-75",children:"Likes + Comments + Shares"})]}),e.jsx("div",{className:"text-end",children:e.jsx("i",{className:"fas fa-heart fa-2x opacity-75"})})]})})})}),e.jsx("div",{className:"col-lg-3 col-md-6 mb-3",children:e.jsx("div",{className:"card border-0 shadow-sm",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:e.jsx("div",{className:"card-body text-white",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1 fw-bold",children:m(N.total_plays)}),e.jsx("p",{className:"mb-0 opacity-75",children:"Total Video Plays"}),e.jsx("small",{className:"opacity-75",children:"Video content views"})]}),e.jsx("div",{className:"text-end",children:e.jsx("i",{className:"fas fa-play-circle fa-2x opacity-75"})})]})})})})]})]}):e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-primary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:m(Ne)}),e.jsx("p",{className:"mb-0",children:"Total Reach"})]}),e.jsx("i",{className:"fas fa-hashtag fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-success text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:m(pe)}),e.jsx("p",{className:"mb-0",children:"Total Engagement"})]}),e.jsx("i",{className:"fas fa-heart fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-warning text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:m(ue)}),e.jsx("p",{className:"mb-0",children:"Total Posts"})]}),e.jsx("i",{className:"fas fa-file-alt fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-info text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:be}),e.jsx("p",{className:"mb-0",children:"Trending Hashtags"})]}),e.jsx("i",{className:"fas fa-fire fa-2x opacity-75"})]})})})})]}),x.length>0&&x[0].topInfluencers&&e.jsx("div",{className:"row mb-4"}),e.jsxs(ye,{id:"hashtag-posts",title:"Hashtag Posts",description:"Detailed view of all posts using this hashtag",children:[e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-md-6 d-flex gap-3 align-items-center",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Search posts...",value:H,onChange:s=>D(s.target.value)}),e.jsx("select",{id:"hashtagFilterSimple",className:"form-select",style:{maxWidth:"250px"},value:l,onChange:s=>{const a=s.target.value;I(a),oe(a),h([]),y([])},children:V.map(s=>e.jsx("option",{value:s.value,children:s.display},s.value))})]})}),A.length>0?e.jsxs("div",{className:"table-responsive",children:[e.jsxs("table",{className:"table table-borderless",style:{fontSize:"15px"},children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"60px",padding:"1.25rem",fontSize:"16px"},className:"fw-semibold",children:"#"}),e.jsx("th",{style:{width:"280px",padding:"1.25rem",fontSize:"16px"},className:"fw-semibold",children:"Influencer"}),e.jsx("th",{style:{width:"130px",padding:"1.25rem",fontSize:"16px"},className:"fw-semibold",children:"Post"}),e.jsx("th",{style:{width:"150px",padding:"1.25rem",fontSize:"16px"},className:"fw-semibold",children:"Interactions"}),e.jsx("th",{style:{width:"280px",padding:"1.25rem",fontSize:"16px"},className:"fw-semibold",children:"Engagement"}),e.jsx("th",{style:{padding:"1.25rem",fontSize:"16px"},className:"fw-semibold",children:"Details"})]})}),e.jsx("tbody",{children:A.map((s,a)=>{var i,o,v,w,c,p,$,P,T,ee,se,ae,te,ie,le,ne,re,ce;return e.jsxs("tr",{style:{borderBottom:"1px solid #f8f9fa"},children:[e.jsx("td",{style:{padding:"1.5rem",textAlign:"center"},children:e.jsx("span",{className:"fw-semibold text-muted",children:a+1})}),e.jsx("td",{style:{padding:"1.5rem"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((o=(i=s.influencer)==null?void 0:i.instagram)==null?void 0:o.profile_pic_url)||"/images/default-avatar.jpg",alt:((v=s.influencer)==null?void 0:v.fullname)||"User Profile",className:"rounded-circle me-3",style:{width:"45px",height:"45px",objectFit:"cover"},onError:t=>{t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNFOUVDRUYiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA4IDEyIDRDOS43OTA4NiA4IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSIjNkI3MjgwIi8+CjxwYXRoIGQ9Ek0xMiAxNEM4LjEzNDAxIDE0IDUgMTcuMTM0IDUgMjFIMTlDMTkgMTcuMTM0IDE1Ljg2NiAxNCAxMiAxNFoiIGZpbGw9IiM2QjcyODAiLz4KPC9zdmc+Cjwvc3ZnPgo="}}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",style:{fontSize:"16px"},children:((w=s.influencer)==null?void 0:w.handle)||((p=(c=s.influencer)==null?void 0:c.instagram)==null?void 0:p.handle)||"Unknown"}),e.jsx("div",{className:"text-muted",style:{fontSize:"14px"},children:(($=s.influencer)==null?void 0:$.fullname)||"No name available"}),e.jsx("div",{className:"mt-2",children:(((P=s.influencer)==null?void 0:P.is_verified)||((ee=(T=s.influencer)==null?void 0:T.instagram)==null?void 0:ee.is_verified))&&e.jsxs("span",{className:"badge bg-primary",style:{fontSize:"12px"},children:[e.jsx("i",{className:"fas fa-check me-1"}),"Verified"]})})]})]})}),e.jsx("td",{style:{padding:"1.5rem"},children:e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:s.display_url||s.thumbnail_url||s.media_url||s.video_url||"/images/placeholder.jpg",alt:"Post",className:"rounded cursor-pointer",style:{width:"90px",height:"90px",objectFit:"cover",cursor:"pointer"},onClick:()=>{const t=`https://www.instagram.com/p/${s.post_shortcode}/`;window.open(t,"_blank","noopener,noreferrer")},onError:t=>{t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHZpZXdCb3g9IjAgMCA5MCA5MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwIiBoZWlnaHQ9IjkwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik00NSAzMEMzNy4yNjggMzAgMzEgMzYuMjY4IDMxIDQ0VjQ2QzMxIDUzLjczMiAzNy4yNjggNjAgNDUgNjBDNTIuNzMyIDYwIDU5IDUzLjczMiA1OSA0NlY0NEM1OSAzNi4yNjggNTIuNzMyIDMwIDQ1IDMwWiIgZmlsbD0iI0NCRDBEMyIvPgo8cGF0aCBkPSJNMzUgNDBIMzlWNTBIMzVWNDBaIiBmaWxsPSIjRkZGRkZGIi8+CjxwYXRoIGQ9Ik01MSA0MEg1NVY1MEg1MVY0MFoiIGZpbGw9IiNGRkZGRkYiLz4KPC9zdmc+"},title:"Click to view on Instagram"}),s.is_video&&e.jsx("div",{className:"position-absolute top-50 start-50 translate-middle",style:{pointerEvents:"none"},children:e.jsx("i",{className:"fas fa-play-circle text-white",style:{fontSize:"1.8rem"}})}),e.jsx("div",{className:"position-absolute top-0 end-0 m-1",style:{pointerEvents:"none"},children:e.jsx("i",{className:"fab fa-instagram text-white",style:{fontSize:"1rem",textShadow:"0 0 3px rgba(0,0,0,0.5)"}})})]})}),e.jsx("td",{style:{padding:"1.5rem"},children:e.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{var t;return je(((t=s._id)==null?void 0:t.$oid)||s._id)},style:{fontSize:"12px"},title:"Click to view post interactions",children:[e.jsx("i",{className:"fas fa-chart-line me-1"}),"View Interactions"]})}),e.jsx("td",{style:{padding:"1.5rem"},children:e.jsx("div",{className:"d-flex align-items-center justify-content-start gap-4",children:e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"far fa-eye text-primary me-2",style:{fontSize:"16px",width:"20px"}}),e.jsx("span",{className:"fw-semibold",style:{fontSize:"15px"},children:m(s.total_play||s.reach||0)})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-heart text-danger me-2",style:{fontSize:"16px",width:"20px"}}),e.jsx("span",{className:"fw-semibold",style:{fontSize:"15px"},children:G(s.total_likes)})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-share text-success me-2",style:{fontSize:"16px",width:"20px"}}),e.jsx("span",{className:"fw-semibold",style:{fontSize:"15px"},children:G(s.reshare_count)})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-comment text-info me-2",style:{fontSize:"16px",width:"20px"}}),e.jsx("span",{className:"fw-semibold",style:{fontSize:"15px"},children:G(s.total_comments)})]})]})})}),e.jsx("td",{style:{padding:"1.5rem",minWidth:"350px"},children:e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("i",{className:"far fa-calendar text-muted me-2",style:{fontSize:"14px"}}),e.jsx("span",{style:{fontSize:"15px"},children:s.created_timestamp_formatted})]}),e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("i",{className:"fas fa-users text-muted me-2",style:{fontSize:"14px"}}),e.jsx("span",{style:{fontSize:"15px"},children:m(s.total_play||0)})]}),s.location&&s.location.name&&e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-danger me-2",style:{fontSize:"14px"}}),e.jsx("span",{className:"text-truncate",style:{maxWidth:"250px",fontSize:"15px"},children:s.location.name})]}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{style:{maxWidth:"300px",fontSize:"15px",lineHeight:"1.4",overflow:S.has(((se=s._id)==null?void 0:se.$oid)||s._id)?"visible":"hidden",display:S.has(((ae=s._id)==null?void 0:ae.$oid)||s._id)?"block":"-webkit-box",WebkitLineClamp:S.has(((te=s._id)==null?void 0:te.$oid)||s._id)?"none":3,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},children:(()=>{var E;const t=X(s.caption);return S.has(((E=s._id)==null?void 0:E.$oid)||s._id)?t:t.length>80?`${t.substring(0,80)}...`:t})()})}),e.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-3",children:[(L.has(((ie=s._id)==null?void 0:ie.$oid)||s._id)?s.hashtags:s.hashtags.slice(0,4)).map((t,E)=>e.jsx("span",{className:"badge bg-light text-primary",style:{fontSize:"12px"},children:t},E)),s.hashtags.length>4&&!L.has(((le=s._id)==null?void 0:le.$oid)||s._id)&&e.jsxs("span",{className:"badge bg-light text-muted",style:{fontSize:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"1px solid transparent"},onClick:()=>{var t;return K(((t=s._id)==null?void 0:t.$oid)||s._id)},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#e9ecef",t.currentTarget.style.borderColor="#dee2e6"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="#f8f9fa",t.currentTarget.style.borderColor="transparent"},role:"button",title:"Click to show all hashtags",children:[e.jsx("i",{className:"fas fa-hashtag me-1"}),"+",s.hashtags.length-4]}),L.has(((ne=s._id)==null?void 0:ne.$oid)||s._id)&&s.hashtags.length>4&&e.jsxs("span",{className:"badge bg-light text-muted",style:{fontSize:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"1px solid transparent"},onClick:()=>{var t;return K(((t=s._id)==null?void 0:t.$oid)||s._id)},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#e9ecef",t.currentTarget.style.borderColor="#dee2e6"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="#f8f9fa",t.currentTarget.style.borderColor="transparent"},role:"button",title:"Click to show less hashtags",children:[e.jsx("i",{className:"fas fa-minus me-1"}),"Show Less"]})]}),X(s.caption).length>80&&e.jsx("div",{children:e.jsx("button",{className:"btn btn-link btn-sm p-0 text-primary",style:{fontSize:"15px",cursor:"pointer"},onClick:()=>{var t;return fe(((t=s._id)==null?void 0:t.$oid)||s._id)},children:S.has(((re=s._id)==null?void 0:re.$oid)||s._id)?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-chevron-up me-1"}),"View Less"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-chevron-down me-1"}),"View More"]})})})]})})]},((ce=s._id)==null?void 0:ce.$oid)||s._id||a)})})]}),!d&&b>0&&j<b&&e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{className:"btn btn-outline-primary",onClick:J,disabled:d,children:[e.jsx("i",{className:"fas fa-chevron-down me-2"}),"Load ",u," More"]})}),!d&&b>1&&e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4 gap-3",children:[e.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>{j>1&&(M(1),(async()=>{try{g(!0);const a=await z.getCampaignContents(l,1,u);if(a.success){y(a.data.posts);const i=B(a.data.posts,l);h([i]),M(1)}}catch(a){console.error("Error loading first page:",a)}finally{g(!1)}})())},disabled:j===1||d,children:[e.jsx("i",{className:"fas fa-chevron-left me-1"}),"First"]}),e.jsxs("span",{className:"badge bg-primary fs-6 px-3 py-2",children:["Page ",j," of ",b]}),e.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:J,disabled:j>=b||d,children:["Next",e.jsx("i",{className:"fas fa-chevron-right ms-1"})]})]}),!d&&F>0&&e.jsx("div",{className:"text-center mt-3",children:e.jsxs("small",{className:"text-muted",children:["Showing ",A.length," of ",F," posts"]})})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-hashtag fa-3x text-muted mb-3"}),e.jsx("h5",{className:"text-muted",children:"No posts found"}),e.jsx("p",{className:"text-muted",children:"Try searching for a different hashtag or check your API connection."})]})]})]})]}),e.jsx(Me,{show:me,onHide:()=>O(!1),interactions:he,loading:xe})]})};export{Ye as default};
