import{r as d,e as b,b as N,a6 as w,a7 as y,j as e,R as v,d as k,L as c}from"./index-D6JG3wqs.js";import{u as S,T as l}from"./TextFormInput-0k0k_i3M.js";import{c as P,a as m,o as C}from"./index.esm-FeflOhFb.js";import{C as L,a as E}from"./Card-DtpoLONq.js";import"./FormControl-CFPYD8oA.js";import"./warning-FUmyl91f.js";import"./FormLabel-CK6E2MUb.js";import"./FormGroup-DujyzLyB.js";const F=()=>{const[i,o]=d.useState(!1),a=b(),{saveSession:u}=N(),[h]=w(),{showNotification:t}=y(),g=P({username:m().required("Please enter your username"),password:m().required("Please enter your password")}),{control:x,handleSubmit:p}=S({resolver:C(g),defaultValues:{username:"",password:""}}),f=()=>{const n=h.get("redirectTo");a(n||"/")},j=p(async n=>{o(!0);try{const r=await fetch("http://localhost:8080/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.ok){const s=await r.json();s.token&&(u({...s,token:s.token}),f(),t({message:"Successfully logged in.",variant:"success"}))}else{const s=await r.json().catch(()=>({}));s.error?t({message:s.error,variant:"danger"}):s.message?t({message:s.message,variant:"danger"}):t({message:`Login failed with status: ${r.status}`,variant:"danger"})}}catch{t({message:"Network error. Please try again.",variant:"danger"})}finally{o(!1)}});return{loading:i,login:j,control:x}},I=()=>{d.useEffect(()=>(document.body.classList.add("authentication-bg"),()=>{document.body.classList.remove("authentication-bg")}),[]);const{loading:i,login:o,control:a}=F();return e.jsx("div",{className:"",children:e.jsx("div",{className:"account-pages py-5",children:e.jsx("div",{className:"container",children:e.jsx(v,{className:"justify-content-center",children:e.jsxs(k,{md:6,lg:5,children:[e.jsx(L,{className:"border-0 shadow-lg",children:e.jsxs(E,{className:"p-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4 text-center auth-logo",children:[e.jsx(c,{to:"/dashboards",className:"logo-dark"}),e.jsx(c,{to:"/dashboards",className:"logo-light"})]}),e.jsx("h4",{className:"fw-bold text-dark mb-2",children:"Welcome Back!"}),e.jsx("p",{className:"text-muted",children:"Sign in to your account to continue"})]}),e.jsxs("form",{onSubmit:o,className:"mt-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(l,{control:a,name:"username",placeholder:"Enter your username",className:"form-control",label:"Username"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{to:"/auth/reset-password",className:"float-end text-muted  ms-1",children:"Forgot password?"}),e.jsx(l,{control:a,name:"password",placeholder:"Enter your password",className:"form-control",label:"Password"})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"remember-me"}),e.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("div",{className:"d-grid",children:e.jsx("button",{disabled:i,className:"btn btn-dark btn-lg fw-medium",type:"submit",children:"Sign In"})})]})]})}),e.jsxs("p",{className:"text-center mt-4 text-white text-opacity-50",children:["Don't have an account?",e.jsx(c,{to:"/auth/sign-up",className:"text-decoration-none text-white fw-bold",children:"Sign Up"})]})]})})})})})},A=()=>e.jsx(I,{});export{A as default};
