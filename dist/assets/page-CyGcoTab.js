import{r as u,e as w,b as y,a9 as v,i as k,j as e,R as S,d as L,L as c}from"./index-WD4EPAaG.js";import{u as P,T as l}from"./TextFormInput-CbhHuE_6.js";import{c as I,a as m,o as C}from"./index.esm-DmP2ZfY-.js";import{A as d}from"./api-Cgyc7qv4.js";import{L as h}from"./Daawat-logo (1)-FedrFLfF.js";import{C as T,a as E}from"./Card-BRVk4TLp.js";import"./FormControl-Dr8rI8_S.js";import"./warning-LEgWqXsj.js";import"./FormLabel-BsE47iRB.js";import"./FormGroup-BM-0mYPW.js";const F=()=>{const[i,o]=u.useState(!1),a=w(),{saveSession:g}=y(),[x]=v(),{showNotification:t}=k(),p=I({username:m().required("Please enter your username"),password:m().required("Please enter your password")}),{control:f,handleSubmit:j}=P({resolver:C(p),defaultValues:{username:"",password:""}}),N=()=>{const n=x.get("redirectTo");a(n||"/")},b=j(async n=>{o(!0);try{const r=await fetch(`${d.API_URL}${d.ENDPOINTS.AUTH.LOGIN}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.ok){const s=await r.json();s.token&&(g({...s,token:s.token}),N(),t({message:"Successfully logged in.",variant:"success"}))}else{const s=await r.json().catch(()=>({}));s.error?t({message:s.error,variant:"danger"}):s.message?t({message:s.message,variant:"danger"}):t({message:`Login failed with status: ${r.status}`,variant:"danger"})}}catch{t({message:"Network error. Please try again.",variant:"danger"})}finally{o(!1)}});return{loading:i,login:b,control:f}},A=()=>{u.useEffect(()=>(document.body.classList.add("authentication-bg"),()=>{document.body.classList.remove("authentication-bg")}),[]);const{loading:i,login:o,control:a}=F();return e.jsx("div",{className:"",children:e.jsx("div",{className:"account-pages py-5",children:e.jsx("div",{className:"container",children:e.jsx(S,{className:"justify-content-center",children:e.jsxs(L,{md:6,lg:5,children:[e.jsx(T,{className:"border-0 shadow-lg",children:e.jsxs(E,{className:"p-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4 text-center auth-logo",children:[e.jsx(c,{to:"/dashboards",className:"logo-dark",children:e.jsx("img",{src:h,height:32,alt:"logo dark"})}),e.jsx(c,{to:"/dashboards",className:"logo-light",children:e.jsx("img",{src:h,height:28,alt:"logo light"})})]}),e.jsx("h4",{className:"fw-bold text-dark mb-2",children:"Welcome Back!"}),e.jsx("p",{className:"text-muted",children:"Sign in to your account to continue"})]}),e.jsxs("form",{onSubmit:o,className:"mt-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(l,{control:a,name:"username",placeholder:"Enter your username",className:"form-control",label:"Username"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{to:"/auth/reset-password",className:"float-end text-muted  ms-1",children:"Forgot password?"}),e.jsx(l,{control:a,name:"password",placeholder:"Enter your password",className:"form-control",label:"Password"})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"remember-me"}),e.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("div",{className:"d-grid",children:e.jsx("button",{disabled:i,className:"btn btn-dark btn-lg fw-medium",type:"submit",children:"Sign In"})})]})]})}),e.jsxs("p",{className:"text-center mt-4 text-white text-opacity-50",children:["Don't have an account?",e.jsx(c,{to:"/auth/sign-up",className:"text-decoration-none text-white fw-bold",children:"Sign Up"})]})]})})})})})},J=()=>e.jsx(A,{});export{J as default};
