import{r as i,j as e}from"./index-Bh59u1hf.js";import{C as z}from"./ComponentContainerCard-BaMFlsFG.js";import{P as O}from"./PageTitle-oJvp3eNk.js";import{C as f}from"./campaignAnalyticsService-DXnOFXLL.js";import{f as M}from"./numberFormat-yIx-nKgv.js";import"./Card-DWtpGysk.js";import"./IconifyIcon-94k1dXdg.js";import"./api-ClkYFUjX.js";const X=()=>{var P,I,L,E,R,F;const[l,A]=i.useState(null),[p,b]=i.useState(!0),[g,v]=i.useState(null),[n,u]=i.useState(null),[c,m]=i.useState(!0),[y,w]=i.useState(null),[d,k]=i.useState(1),[j]=i.useState(10),[x,G]=i.useState(0),[C,T]=i.useState(0),[V,N]=i.useState(!1),[t,D]=i.useState(null),S={totalPosts:"0",totalViews:"0",totalLikes:"0",totalComments:"0",totalReshare:"0",avgER:0,avgReach:"0",influencerCount:0,platforms:[{name:"Instagram",followers:0,engagement:0,posts:0},{name:"Facebook",followers:0,engagement:0,posts:0},{name:"Twitter",followers:0,engagement:0,posts:0},{name:"LinkedIn",followers:0,engagement:0,posts:0}]};i.useEffect(()=>{(async()=>{try{b(!0),v(null);const a=await f.getCampaignAnalysis("837");A(a)}catch(a){v(a instanceof Error?a.message:"Failed to fetch analytics data"),console.error("Error fetching analytics:",a)}finally{b(!1)}})()},[]),i.useEffect(()=>{(async()=>{try{m(!0),w(null);const a=await f.getInfluencerList("837",1,j);u(a),a!=null&&a.data&&(G(a.data.totalPages||0),T(a.data.totalCount||0))}catch(a){w(a instanceof Error?a.message:"Failed to fetch influencer data"),console.error("Error fetching influencers:",a)}finally{m(!1)}})()},[j]);const _=async()=>{var s,a;if(!(d>=x||c))try{m(!0);const o=d+1,r=await f.getInfluencerList("837",o,j);if((s=r==null?void 0:r.data)!=null&&s.result&&r.data.result.length>0){const H={...r,data:{...r.data,result:[...((a=n==null?void 0:n.data)==null?void 0:a.result)||[],...r.data.result]}};u(H),k(o)}}catch(o){console.error("Error loading more data:",o)}finally{m(!1)}},h=l!=null&&l.data?{totalPosts:l.data.total_posts||"0",totalViews:l.data.total_views||"0",totalLikes:l.data.total_likes||"0",totalComments:l.data.total_comments||"0",totalReshare:l.data.total_reshare||"0",avgER:l.data.avg_er||0,avgReach:l.data.avg_reach||"0",influencerCount:l.data.influencer_count||0,platforms:S.platforms}:S;return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Social Analytics",subName:"Track your social media performance"}),e.jsxs("div",{className:"container-fluid",children:[p&&e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12 text-center",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading analytics data..."})]})}),g&&e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),g,e.jsx("button",{className:"btn btn-sm btn-outline-danger ms-3",onClick:()=>window.location.reload(),children:"Retry"})]})})}),!p&&e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-dark text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:M(h.influencerCount)}),e.jsx("p",{className:"mb-0",children:"Influencers"})]}),e.jsx("i",{className:"fas fa-user-friends fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-primary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justiftotal_viewsy-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:h.totalPosts}),e.jsx("p",{className:"mb-0",children:"Total Posts"})]}),e.jsx("i",{className:"fas fa-file-alt fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-success text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:h.totalViews}),e.jsx("p",{className:"mb-0",children:"Total Views"})]}),e.jsx("i",{className:"fas fa-eye fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-warning text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:h.totalLikes}),e.jsx("p",{className:"mb-0",children:"Total Likes"})]}),e.jsx("i",{className:"fas fa-heart fa-2x opacity-75"})]})})})})]}),!p&&(l==null?void 0:l.data)&&e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-secondary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:h.totalReshare}),e.jsx("p",{className:"mb-0",children:"Total Reshares"})]}),e.jsx("i",{className:"fas fa-share fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-info text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:h.totalComments}),e.jsx("p",{className:"mb-0",children:"Total Comments"})]}),e.jsx("i",{className:"fas fa-comments fa-2x opacity-75"})]})})})})]}),e.jsxs(z,{id:"influencer-analytics",title:"Influencer Performance",description:"Detailed analytics by influencers in the campaign",children:[c&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading influencers..."})}),e.jsx("p",{className:"mt-2",children:"Loading influencer data..."})]}),y&&e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),y]}),!c&&((P=n==null?void 0:n.data)==null?void 0:P.result)&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Influencer"}),e.jsx("th",{children:"Views "}),e.jsx("th",{children:"Likes"}),e.jsx("th",{children:"Comments"}),e.jsx("th",{children:"Content ER"}),e.jsx("th",{children:"Reach"}),e.jsx("th",{children:"Shares"}),e.jsx("th",{children:"Post Actions"})]})}),e.jsx("tbody",{children:n.data.result.map((s,a)=>{var o;return e.jsxs("tr",{children:[e.jsx("td",{className:"fw-semibold",children:a+1}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"position-relative me-3",children:[e.jsx("img",{src:s.profile_pic_url,alt:s.fullname,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"},onError:r=>{r.target.src="https://via.placeholder.com/40x40/6c757d/ffffff?text="+s.fullname.charAt(0)}}),e.jsx("i",{className:"fab fa-instagram text-primary position-absolute",style:{fontSize:"12px",bottom:"-2px",right:"-2px",backgroundColor:"white",borderRadius:"50%",padding:"2px",border:"1px solid #dee2e6"}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold text-dark",children:s.fullname}),e.jsx("small",{className:"text-muted",children:s.handle})]})]})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:s.total_views})}),e.jsx("td",{children:s.total_likes==="0"?e.jsx("span",{className:"text-warning",children:"Hidden"}):e.jsx("span",{className:"fw-semibold",children:s.total_likes})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:s.total_comments})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:parseFloat(s.er).toFixed(2)})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:typeof s.reach=="number"?M(s.reach):s.reach})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:s.total_reshare_count})}),e.jsx("td",{children:e.jsx("img",{src:((o=s.posts[0])==null?void 0:o.display_url)||"https://via.placeholder.com/30x30/6c757d/ffffff",alt:"Post",className:"rounded",style:{width:"30px",height:"30px",objectFit:"cover",cursor:"pointer"},title:"View Post Details",onClick:()=>{D(s),N(!0)}})})]},s.influencer_id)})})]})}),!c&&x>0&&d<x&&e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{className:"btn btn-outline-primary",onClick:_,disabled:c,children:[e.jsx("i",{className:"fas fa-chevron-down me-2"}),"Load ",j," More"]})}),!c&&x>1&&e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4 gap-3",children:[e.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>{d>1&&(async()=>{try{m(!0);const a=await f.getInfluencerList("837",1,j);a!=null&&a.data&&(u(a),k(1))}catch(a){console.error("Error loading first page:",a)}finally{m(!1)}})()},disabled:d===1||c,children:[e.jsx("i",{className:"fas fa-chevron-left me-1"}),"First"]}),e.jsxs("span",{className:"badge bg-primary fs-6 px-3 py-2",children:["Page ",d," of ",x]}),e.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:_,disabled:d>=x||c,children:["Next",e.jsx("i",{className:"fas fa-chevron-right ms-1"})]})]}),!c&&C>0&&e.jsx("div",{className:"text-center mt-3",children:e.jsxs("small",{className:"text-muted",children:["Showing ",((L=(I=n==null?void 0:n.data)==null?void 0:I.result)==null?void 0:L.length)||0," of ",C," influencers"]})})]})]}),V&&t&&e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>N(!1),children:e.jsx("div",{className:"modal-dialog modal-lg",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header border-0 pb-0",children:e.jsx("button",{type:"button",className:"btn-close",onClick:()=>N(!1)})}),e.jsx("div",{className:"modal-body pt-0",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("img",{src:((E=t.posts[0])==null?void 0:E.display_url)||"https://via.placeholder.com/400x400/6c757d/ffffff",alt:"Post",className:"img-fluid rounded",style:{width:"100%",maxHeight:"500px",objectFit:"cover"}})}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("div",{className:"position-relative me-3",children:[e.jsx("img",{src:t.profile_pic_url,alt:t.fullname,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("i",{className:"fab fa-instagram text-primary position-absolute",style:{fontSize:"12px",bottom:"-2px",right:"-2px",backgroundColor:"white",borderRadius:"50%",padding:"2px",border:"1px solid #dee2e6"}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:t.fullname}),e.jsx("small",{className:"text-muted",children:t.handle})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:((R=t.posts[0])==null?void 0:R.post_date)||"Oct 10, 2025"}),e.jsx("div",{className:"d-flex align-items-center justify-content-end"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-muted small",style:{fontSize:"12px",lineHeight:"1.4",maxHeight:"120px",overflowY:"auto"},children:((F=t.posts[0])==null?void 0:F.caption)||`#Collaboration

📢 Introducing the all-new
*#GalaxyM17 5G* - the Monster In Motion
at a *Special Launch Price* ~₹16499~ *₹12499* 🌟

🤳🏻 50MP No Shake Cam for blur-free videos

💪🏻 Durable Corning Gorilla Glass Victus and IP54 protection 🌟 7.5mm slim design

✨ Circle to Search | Google Gemini

6️⃣ Gen OS and Security updates

📲 sAMOLED Display | 1100 nits

*Sale starts: 13th October*
▶️Head over to Amazon to know more. @samsungindia
#GalaxyM17 5G #MonsterInMotion #LoveForMonster #Samsung #trendup
#ExploreGalaxy #trending #viral #viralreels`})}),e.jsxs("div",{className:"row g-2 mb-4",children:[e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"card border-0 text-center py-3",style:{background:"linear-gradient(135deg, #e91e63 0%, #f06292 100%)",borderRadius:"12px"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-2",style:{width:"36px",height:"36px",backgroundColor:"rgba(255,255,255,0.2)"},children:e.jsx("i",{className:"fas fa-heart text-white"})}),e.jsx("span",{className:"fw-bold text-white small",children:t.total_likes==="0"?"Hidden":t.total_likes}),e.jsx("small",{className:"text-white-50",children:"Likes"})]})})}),e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"card border-0 text-center py-3",style:{background:"linear-gradient(135deg, #2196f3 0%, #64b5f6 100%)",borderRadius:"12px"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-2",style:{width:"36px",height:"36px",backgroundColor:"rgba(255,255,255,0.2)"},children:e.jsx("i",{className:"fas fa-comment text-white"})}),e.jsx("span",{className:"fw-bold text-white small",children:t.total_comments}),e.jsx("small",{className:"text-white-50",children:"Comments"})]})})}),e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"card border-0 text-center py-3",style:{background:"linear-gradient(135deg, #4caf50 0%, #81c784 100%)",borderRadius:"12px"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-2",style:{width:"36px",height:"36px",backgroundColor:"rgba(255,255,255,0.2)"},children:e.jsx("i",{className:"fas fa-share text-white"})}),e.jsx("span",{className:"fw-bold text-white small",children:t.total_views}),e.jsx("small",{className:"text-white-50",children:"Views"})]})})})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("span",{className:"badge bg-dark me-2",children:[parseFloat(t.er).toFixed(2),"%"]}),e.jsx("small",{className:"text-muted",children:"ER"})]}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{var s;(s=t.posts[0])!=null&&s.post_link&&window.open(t.posts[0].post_link,"_blank")},children:"View More"})]})]})]})})]})})})]})};export{X as default};
