import{j as e,R as N,d as h,r as d,F as I}from"./index-Bh85SR9Q.js";import{I as l}from"./IconifyIcon-BWbfdRy8.js";import{C as w,a as v,b as C}from"./Card-eitQuNTa.js";import{B as f}from"./Badge-BBicmACR.js";import{S}from"./Spinner-DMoCfdKG.js";import{B as x}from"./ListGroup-DUpK6aig.js";import{f as $}from"./numberFormat-DtcdhD-a.js";import{R as k}from"./react-apexcharts.min-plrPwcPA.js";import{P as A}from"./PageTitle-CStKeIA9.js";import{C as L}from"./campaignContentsService-DCiZN_AJ.js";import{C as M}from"./challengerService-CKSx1IpQ.js";import"./warning-RPHtR346.js";import"./hook-3UxpXl5i.js";import"./extends-CF3RwP-h.js";import"./Nav-fQSpUNLp.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-UMIOZY6J.js";import"./useMergedRefs-CZlVEyLs.js";import"./useEventCallback-BxdOIJX1.js";import"./Button-BIzW83lN.js";import"./api-BDs4y23Q.js";const P=n=>{const u=new Date(n),o=Math.floor((new Date().getTime()-u.getTime())/1e3);if(o<60)return"just now";if(o<3600){const i=Math.floor(o/60);return`${i} ${i===1?"minute":"minutes"} ago`}else if(o<86400){const i=Math.floor(o/3600);return`${i} ${i===1?"hour":"hours"} ago`}else{const i=Math.floor(o/86400);return`${i} ${i===1?"day":"days"} ago`}},_=({challengers:n,title:u="Recent Challengers",showHeader:p=!0,maxHeight:o="400px",isLoading:i=!1,error:g=null,onTitleClick:c})=>{const j=s=>{switch(s.toLowerCase()){case"weight loss":return"#ef4444";case"muscle building":return"#10b981";case"endurance":return"#f59e0b";case"flexibility":return"#8b5cf6";default:return"#6b7280"}},y=s=>{switch(s.toLowerCase()){case"weight loss":return"danger";case"muscle building":return"success";case"endurance":return"warning";case"flexibility":return"info";default:return"secondary"}},b=s=>{switch(s.toLowerCase()){case"vegetarian":return"solar:leaf-broken";case"keto":return"solar:fire-broken";case"high protein":return"solar:dumbbell-broken";case"low carb":return"solar:scale-broken";case"mediterranean":return"solar:planet-broken";default:return"solar:nutrition-broken"}},t=s=>s?"solar:check-circle-broken":"solar:pause-circle-broken",r=s=>s?"success":"secondary";return e.jsxs(w,{className:"h-100",children:[p&&e.jsxs(v,{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h5",{className:`card-title mb-0 ${c?"text-primary cursor-pointer":""}`,onClick:c,style:c?{cursor:"pointer"}:{},children:u}),e.jsx(f,{bg:"primary",pill:!0,children:n.length})]}),e.jsx(C,{className:"p-0",children:e.jsx("div",{style:{maxHeight:o,overflowY:"auto"},children:i?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(S,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading challengers..."})]}):g?e.jsxs("div",{className:"text-center py-4 text-danger",children:[e.jsx(l,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:g})]}):e.jsx(x,{variant:"flush",children:n.length===0?e.jsxs(x.Item,{className:"text-center py-4 text-muted",children:[e.jsx(l,{icon:"solar:users-group-two-rounded-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No challengers available"})]}):n.map(s=>e.jsx(x.Item,{className:"px-3 py-3",children:e.jsxs(N,{className:"align-items-start",children:[e.jsx(h,{xs:"auto",children:e.jsx("div",{className:"avatar-sm rounded-circle d-flex align-items-center justify-content-center",style:{backgroundColor:`${j(s.type)}20`},children:e.jsx(l,{icon:b(s.category),className:"fs-18",color:j(s.type)})})}),e.jsxs(h,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h6",{className:"mb-0 text-truncate flex-grow-1 me-2",children:s.name}),e.jsxs(f,{bg:r(s.isActive),className:"d-flex align-items-center",children:[e.jsx(l,{icon:t(s.isActive),className:"fs-12 me-1"}),s.isActive?"Active":"Inactive"]})]}),e.jsxs("p",{className:"text-muted mb-2 small",children:[e.jsx(l,{icon:"solar:phone-broken",className:"fs-12 me-1"}),s.mobile]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(f,{bg:y(s.type),className:"me-2",children:s.type}),e.jsx("span",{className:"text-muted small",children:s.category})]}),e.jsx("div",{className:"text-end",children:e.jsxs("div",{className:"text-primary fw-semibold small",children:[e.jsx(l,{icon:"solar:clock-circle-broken",className:"fs-12 me-1"}),s.duration]})})]}),s.subcategory&&e.jsx("div",{className:"mb-2",children:e.jsx(f,{bg:"light",text:"dark",className:"small",children:s.subcategory})}),s.createdAt&&e.jsxs("div",{className:"d-flex align-items-center text-muted small",children:[e.jsx(l,{icon:"solar:calendar-broken",className:"fs-12 me-1"}),"Created ",P(s.createdAt)]})]})]})},s._id))})})})]})},E=({posts:n,title:u="Recent Posts",showHeader:p=!0,maxHeight:o="400px",isLoading:i=!1,error:g=null,onTitleClick:c})=>{const j=t=>{const r=new Date(t*1e3),a=Math.floor((new Date().getTime()-r.getTime())/1e3);if(a<60)return"just now";if(a<3600){const m=Math.floor(a/60);return`${m} ${m===1?"minute":"minutes"} ago`}else if(a<86400){const m=Math.floor(a/3600);return`${m} ${m===1?"hour":"hours"} ago`}else{const m=Math.floor(a/86400);return`${m} ${m===1?"day":"days"} ago`}},y=(t,r=100)=>t.length>r?`${t.substring(0,r)}...`:t,b=t=>{const r=`https://www.instagram.com/${t}/#`;window.open(r,"_blank")};return e.jsxs(w,{className:"h-100",children:[p&&e.jsxs(v,{className:`d-flex align-items-center justify-content-between ${c?"user-select-none":""}`,style:{cursor:c?"pointer":"default",transition:c?"background-color 0.2s":"none"},onClick:c,title:c?"Click to open hashtag performance in new tab":"",onMouseEnter:t=>{c&&(t.currentTarget.style.backgroundColor="#f8f9fa")},onMouseLeave:t=>{c&&(t.currentTarget.style.backgroundColor="")},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0 me-2",children:u}),c&&e.jsx(l,{icon:"solar:external-link-broken",className:"fs-12 text-muted"})]}),e.jsx(f,{bg:"primary",pill:!0,children:n.length})]}),e.jsx(C,{className:"p-0",children:e.jsx("div",{style:{maxHeight:o,overflowY:"auto"},children:e.jsx(x,{variant:"flush",children:i?e.jsxs(x.Item,{className:"text-center py-4 text-muted",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading campaign posts..."})]}):g?e.jsxs(x.Item,{className:"text-center py-4 text-muted",children:[e.jsx(l,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2 text-danger"}),e.jsx("p",{className:"text-danger",children:g})]}):n.length===0?e.jsxs(x.Item,{className:"text-center py-4 text-muted",children:[e.jsx(l,{icon:"solar:document-text-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No campaign posts available"})]}):n.map(t=>e.jsx(x.Item,{className:"px-3 py-3",children:e.jsxs(N,{className:"align-items-start",children:[e.jsx(h,{xs:"auto",children:e.jsxs("div",{className:"rounded-circle overflow-hidden position-relative",style:{width:"40px",height:"40px",minWidth:"40px",minHeight:"40px"},children:[e.jsx("img",{src:t.influencer.profile_pic_url,alt:t.influencer.full_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:r=>{const s=r.target;s.style.display="none";const a=s.nextElementSibling;a&&(a.style.display="flex")}}),e.jsx("div",{style:{width:"100%",height:"100%",display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",position:"absolute",top:"0",left:"0"},children:e.jsx(l,{icon:"solar:user-broken",className:"fs-18 text-muted"})})]})}),e.jsxs(h,{children:[e.jsx("div",{className:"d-flex align-items-start justify-content-between mb-2",children:e.jsxs("div",{className:"flex-grow-1 me-2",children:[e.jsx("h6",{className:"mb-1 text-truncate",children:e.jsxs("span",{className:"text-primary",style:{cursor:"pointer",textDecoration:"none"},onClick:()=>b(t.influencer.username),onMouseEnter:r=>{r.currentTarget.style.textDecoration="underline"},onMouseLeave:r=>{r.currentTarget.style.textDecoration="none"},title:`Open @${t.influencer.username} on Instagram`,children:["@",t.influencer.username]})}),e.jsxs("div",{className:"d-flex align-items-center text-muted small mb-1",children:[e.jsxs("span",{className:"me-2",children:[" ",t.influencer.full_name]}),e.jsx(f,{bg:"outline-primary",text:"primary",className:"me-2",children:t.is_video?"Video":t.is_carousel?"Carousel":"Photo"})]})]})}),e.jsx("p",{className:"text-muted mb-2 small",children:y(t.caption)}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[t.hashtags.slice(0,2).map((r,s)=>e.jsx(f,{bg:"light",text:"dark",className:"me-1 small",children:r},s)),t.hashtags.length>2&&e.jsxs("span",{className:"text-muted small",children:["+",t.hashtags.length-2," more"]})]}),e.jsx("small",{className:"text-muted",children:j(t.created_timestamp)})]}),e.jsx("div",{className:"d-flex align-items-center justify-content-between",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(l,{icon:"solar:heart-broken",className:"fs-12 me-1 text-danger"}),e.jsx("span",{className:"small text-muted",children:t.total_likes})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(l,{icon:"solar:chat-round-line-broken",className:"fs-12 me-1 text-primary"}),e.jsx("span",{className:"small text-muted",children:t.total_comments})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(l,{icon:"solar:share-broken",className:"fs-12 me-1 text-success"}),e.jsx("span",{className:"small text-muted",children:t.reshare_count||0})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(l,{icon:"solar:eye-broken",className:"fs-12 me-1 text-muted"}),e.jsx("span",{className:"small text-muted",children:$(t.reach)})]})]})})]})]})},t._id))})})})]})},D=()=>{const n={chart:{type:"bar",height:350,toolbar:{show:!1}},series:[{name:"Completed",data:[8,12,15,18,22,25,28,32,35,38,42,45],color:"#10b981"},{name:"In Progress",data:[5,8,10,12,15,18,20,23,25,28,30,32],color:"#3b82f6"},{name:"Not Started",data:[12,18,22,25,28,30,32,35,38,40,42,45],color:"#6b7280"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(w,{children:[e.jsx(v,{children:e.jsx("h5",{className:"card-title mb-0",children:"Challenges Progress"})}),e.jsx(C,{children:e.jsx(k,{options:n,series:n.series,type:"bar",height:350})})]})},R=()=>{const n={chart:{type:"area",height:350,toolbar:{show:!1}},series:[{name:"Published Posts",data:[5,8,12,15,18,22,25,28,32,35,38,42],color:"#f59e0b"},{name:"Draft Posts",data:[2,3,4,5,6,7,8,9,10,11,12,13],color:"#8b5cf6"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3,stops:[0,90,100]}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(w,{children:[e.jsx(v,{children:e.jsx("h5",{className:"card-title mb-0",children:"Posts Analytics"})}),e.jsx(C,{children:e.jsx(k,{options:n,series:n.series,type:"area",height:350})})]})},re=()=>{const[n,u]=d.useState([]),[p,o]=d.useState(!0),[i,g]=d.useState(null),[c,j]=d.useState([]),[y,b]=d.useState(!0),[t,r]=d.useState(null);return d.useEffect(()=>{(async()=>{try{o(!0);const a=await L.getCampaignContents("daawatbiryani",1,10);a.success&&a.data.posts&&u(a.data.posts)}catch(a){g("Failed to fetch campaign contents"),console.error("Error fetching campaign contents:",a)}finally{o(!1)}})()},[]),d.useEffect(()=>{(async()=>{try{b(!0),r(null);const a=await M.getAllChallengers({limit:10,page:1});a.data&&j(a.data)}catch(a){r("Failed to fetch challengers"),console.error("Error fetching challengers:",a)}finally{b(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(A,{subName:"Daawat",title:"Dashboard Analytics"}),e.jsx("div",{className:"mb-4"}),e.jsxs(N,{className:"mb-4 g-3",children:[e.jsx(h,{xl:6,lg:6,md:12,children:e.jsx(D,{})}),e.jsx(h,{xl:6,lg:12,md:12,children:e.jsx(R,{})})]}),e.jsxs(N,{className:"mb-4 g-3",children:[e.jsx(h,{xl:6,lg:6,md:12,children:e.jsx(_,{challengers:c,title:"Recent Challengers",showHeader:!0,maxHeight:"400px",isLoading:y,error:t,onTitleClick:()=>window.open("/challengers","_blank")})}),e.jsx(h,{xl:6,lg:12,md:12,children:e.jsx(E,{posts:n,title:"Recent Posts",showHeader:!0,maxHeight:"400px",isLoading:p,error:i,onTitleClick:()=>window.open("/social/hashtag-performance","_blank")})})]}),e.jsx(I,{})]})};export{re as default};
