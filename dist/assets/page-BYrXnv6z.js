import{r as u,e as b,b as w,a8 as y,h as v,j as e,R as S,d as k,L as c}from"./index-CsaR7fPf.js";import{u as P,T as l}from"./TextFormInput-KGUigVzg.js";import{c as I,a as m,o as L}from"./index.esm-B-TDKd-y.js";import{A as d}from"./api-Bmjna9l7.js";import{C,a as T}from"./Card-BECwkefK.js";import"./FormControl-Cb3MJTfg.js";import"./warning-BLhWSND4.js";import"./FormLabel-grsmkK53.js";import"./FormGroup-BToNJnMV.js";const E=()=>{const[i,o]=u.useState(!1),a=b(),{saveSession:h}=w(),[x]=y(),{showNotification:t}=v(),g=I({username:m().required("Please enter your username"),password:m().required("Please enter your password")}),{control:p,handleSubmit:f}=P({resolver:L(g),defaultValues:{username:"",password:""}}),N=()=>{const n=x.get("redirectTo");a(n||"/")},j=f(async n=>{o(!0);try{const r=await fetch(`${d.API_URL}${d.ENDPOINTS.AUTH.LOGIN}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.ok){const s=await r.json();s.token&&(h({...s,token:s.token}),N(),t({message:"Successfully logged in.",variant:"success"}))}else{const s=await r.json().catch(()=>({}));s.error?t({message:s.error,variant:"danger"}):s.message?t({message:s.message,variant:"danger"}):t({message:`Login failed with status: ${r.status}`,variant:"danger"})}}catch{t({message:"Network error. Please try again.",variant:"danger"})}finally{o(!1)}});return{loading:i,login:j,control:p}},F=()=>{u.useEffect(()=>(document.body.classList.add("authentication-bg"),()=>{document.body.classList.remove("authentication-bg")}),[]);const{loading:i,login:o,control:a}=E();return e.jsx("div",{className:"",children:e.jsx("div",{className:"account-pages py-5",children:e.jsx("div",{className:"container",children:e.jsx(S,{className:"justify-content-center",children:e.jsxs(k,{md:6,lg:5,children:[e.jsx(C,{className:"border-0 shadow-lg",children:e.jsxs(T,{className:"p-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4 text-center auth-logo",children:[e.jsx(c,{to:"/dashboards",className:"logo-dark"}),e.jsx(c,{to:"/dashboards",className:"logo-light"})]}),e.jsx("h4",{className:"fw-bold text-dark mb-2",children:"Welcome Back!"}),e.jsx("p",{className:"text-muted",children:"Sign in to your account to continue"})]}),e.jsxs("form",{onSubmit:o,className:"mt-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(l,{control:a,name:"username",placeholder:"Enter your username",className:"form-control",label:"Username"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{to:"/auth/reset-password",className:"float-end text-muted  ms-1",children:"Forgot password?"}),e.jsx(l,{control:a,name:"password",placeholder:"Enter your password",className:"form-control",label:"Password"})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"remember-me"}),e.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("div",{className:"d-grid",children:e.jsx("button",{disabled:i,className:"btn btn-dark btn-lg fw-medium",type:"submit",children:"Sign In"})})]})]})}),e.jsxs("p",{className:"text-center mt-4 text-white text-opacity-50",children:["Don't have an account?",e.jsx(c,{to:"/auth/sign-up",className:"text-decoration-none text-white fw-bold",children:"Sign Up"})]})]})})})})})},_=()=>e.jsx(F,{});export{_ as default};
