import{l as g}from"./index-4zMXJwUP.js";import{A as p}from"./api-ClkYFUjX.js";const a=h=>{var o,e,n;try{const t=(o=g.getCookie("_DARKONE_AUTH_KEY_"))==null?void 0:o.toString();if(t){const r=JSON.parse(t);if(r!=null&&r.token)return r.token}const d=(e=g.getCookie("token"))==null?void 0:e.toString();return h||d||localStorage.getItem("authToken")||""}catch(t){return console.warn("Failed to get auth token from session:",t),((n=g.getCookie("token"))==null?void 0:n.toString())||localStorage.getItem("authToken")||""}},c=()=>({authorization:a(),"Content-Type":"application/json"});class w{static async getAllChallengers(o){try{if(!a())throw new Error("Authentication token not found. Please login again.");const n=new URLSearchParams;o!=null&&o.category&&n.append("category",o.category),o!=null&&o.subcategory&&n.append("subcategory",o.subcategory),o!=null&&o.type&&n.append("type",o.type),o!=null&&o.duration&&n.append("duration",o.duration),o!=null&&o.search&&n.append("search",o.search),o!=null&&o.page&&n.append("page",o.page.toString()),o!=null&&o.limit&&n.append("limit",o.limit.toString());const t=await fetch(`${p.API_URL}/challenger?${n.toString()}`,{method:"GET",headers:c()});if(!t.ok)throw new Error(`Failed to fetch challengers: ${t.statusText}`);return await t.json()}catch(e){throw console.error("Error fetching challengers:",e),e}}static async getUTMChallengers(o){try{if(!a())throw new Error("Authentication token not found. Please login again.");const n=new URLSearchParams;o!=null&&o.utm_url&&n.append("utm_url",o.utm_url),o!=null&&o.from&&n.append("from",o.from),o!=null&&o.to&&n.append("to",o.to),o!=null&&o.page&&n.append("page",o.page.toString()),o!=null&&o.limit&&n.append("limit",o.limit.toString());const t=await fetch(`${p.API_URL}/challenger?${n.toString()}`,{method:"GET",headers:c()});if(!t.ok)throw new Error(`Failed to fetch UTM challengers: ${t.statusText}`);return await t.json()}catch(e){throw console.error("Error fetching UTM challengers:",e),e}}static async getChallengerById(o){try{if(!a())throw new Error("Authentication token not found. Please login again.");const n=await fetch(`${p.API_URL}/challenger/${o}`,{method:"GET",headers:c()});if(!n.ok)throw new Error(`Failed to fetch challenger: ${n.statusText}`);return await n.json()}catch(e){throw console.error("Error fetching challenger:",e),e}}static async deleteChallenger(o){try{if(!a())throw new Error("Authentication token not found. Please login again.");const n=await fetch(`http://localhost:8080/api/challenger/${o}`,{method:"DELETE",headers:c()});if(!n.ok)throw new Error(`Failed to delete challenger: ${n.statusText}`)}catch(e){throw console.error("Error deleting challenger:",e),e}}}export{w as C};
