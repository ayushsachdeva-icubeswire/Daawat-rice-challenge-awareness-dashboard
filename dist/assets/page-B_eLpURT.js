import{r as h,a8 as b,b as w,a9 as y,h as v,j as e,R as k,d as S,L as c}from"./index-BGj1e2T3.js";import{u as P,T as L}from"./TextFormInput-DBrMXxb2.js";import{P as I}from"./PasswordFormInput-Bb2czcl2.js";import{c as C,a as l,o as F}from"./index.esm-Dd2mWoGk.js";import{A as m}from"./api-VjRoL-6d.js";import{L as d}from"./Daawat-logo (1)-ja1ffVPs.js";import{C as T,b as E}from"./Card-CWoJ-2wS.js";import"./FormControl-CFam3LJ9.js";import"./warning-ClRYm4sS.js";import"./FormLabel-DDCHjN5Y.js";import"./FormGroup-BLP_G_il.js";import"./IconifyIcon-Dr-9Hheo.js";const A=()=>{const[i,o]=h.useState(!1),a=b(),{saveSession:u}=w(),[g]=y(),{showNotification:t}=v(),x=C({username:l().required("Please enter your username"),password:l().required("Please enter your password")}),{control:p,handleSubmit:f}=P({resolver:F(x),defaultValues:{username:"",password:""}}),j=()=>{const n=g.get("redirectTo");a(n||"/")},N=f(async n=>{o(!0);try{const r=await fetch(`${m.API_URL}${m.ENDPOINTS.AUTH.LOGIN}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.ok){const s=await r.json();s.token&&(u({...s,token:s.token}),j(),t({message:"Successfully logged in.",variant:"success"}))}else{const s=await r.json().catch(()=>({}));s.error?t({message:s.error,variant:"danger"}):s.message?t({message:s.message,variant:"danger"}):t({message:`Login failed with status: ${r.status}`,variant:"danger"})}}catch{t({message:"Network error. Please try again.",variant:"danger"})}finally{o(!1)}});return{loading:i,login:N,control:p}},O=()=>{h.useEffect(()=>(document.body.classList.add("authentication-bg"),()=>{document.body.classList.remove("authentication-bg")}),[]);const{loading:i,login:o,control:a}=A();return e.jsx("div",{className:"",children:e.jsx("div",{className:"account-pages py-5",children:e.jsx("div",{className:"container",children:e.jsx(k,{className:"justify-content-center",children:e.jsxs(S,{md:6,lg:5,children:[e.jsx(T,{className:"border-0 shadow-lg",children:e.jsxs(E,{className:"p-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4 text-center auth-logo",children:[e.jsx(c,{to:"/dashboards",className:"logo-dark",children:e.jsx("img",{src:d,height:32,alt:"logo dark"})}),e.jsx(c,{to:"/dashboards",className:"logo-light",children:e.jsx("img",{src:d,height:28,alt:"logo light"})})]}),e.jsx("h4",{className:"fw-bold text-dark mb-2",children:"Welcome Back!"}),e.jsx("p",{className:"text-muted",children:"Sign in to your account to continue"})]}),e.jsxs("form",{onSubmit:o,className:"mt-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(L,{control:a,name:"username",placeholder:"Enter your username",className:"form-control",label:"Username"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{to:"/auth/reset-password",className:"float-end text-muted  ms-1",children:"Forgot password?"}),e.jsx(I,{control:a,name:"password",placeholder:"Enter your password",className:"form-control",label:"Password"})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"remember-me"}),e.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("div",{className:"d-grid",children:e.jsx("button",{disabled:i,className:"btn btn-dark btn-lg fw-medium",type:"submit",children:"Sign In"})})]})]})}),e.jsxs("p",{className:"text-center mt-4 text-white text-opacity-50",children:["Don't have an account?",e.jsx(c,{to:"/auth/sign-up",className:"text-decoration-none text-white fw-bold",children:"Sign Up"})]})]})})})})})},z=()=>e.jsx(O,{});export{z as default};
