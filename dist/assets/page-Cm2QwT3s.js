import{i as O,r as n,j as e}from"./index-CwQHO6uN.js";import{C as z}from"./ComponentContainerCard-RZyeSLIJ.js";import{P as U}from"./PageTitle-BYJ3eamr.js";import{A as W}from"./api-ClkYFUjX.js";import{f as G}from"./numberFormat-yIx-nKgv.js";import"./Card-Y2m9jcF5.js";import"./IconifyIcon-Ce_ycGVb.js";const o=O.create({baseURL:W.API_URL,headers:{"Content-Type":"application/json"}});function Y(){return{get:o.get.bind(o),post:o.post.bind(o),patch:o.patch.bind(o),put:o.put.bind(o),delete:o.delete.bind(o)}}const q=Y();class v{static async getCampaignAnalysis(d){try{const t=await fetch(`https://apis.icubeswire.co/api/v1/campaign-analytics/analysis/${d}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`API call failed: ${t.status} ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching campaign analytics:",t),t}}static async getCampaignAnalysisWithHttpClient(d){try{return(await q.get(`https://apis.icubeswire.co/api/v1/campaign-analytics/analysis/${d}`)).data}catch(t){throw console.error("Error fetching campaign analytics with HttpClient:",t),t}}static async getInfluencerList(d,t=1,f=5,N="desc"){try{const r=await fetch(`https://apis.icubeswire.co/api/v1/campaign-analytics/influencers/list/${d}?page=${t}&limit=${f}&sort_order=${N}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`API call failed: ${r.status} ${r.statusText}`);return await r.json()}catch(r){throw console.error("Error fetching influencer list:",r),r}}static async getPostInteractions(d){try{const t=await fetch(`https://apis.icubeswire.co/api/v1/campaign-analytics/post-intraction?id=${d}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`API call failed: ${t.status} ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching post interactions:",t),t}}}const se=()=>{var S,L,A,R,T,F;const[l,d]=n.useState(null),[t,f]=n.useState(!0),[N,r]=n.useState(null),[c,y]=n.useState(null),[m,j]=n.useState(!0),[C,k]=n.useState(null),[x,P]=n.useState(1),[b]=n.useState(10),[u,M]=n.useState(0),[_,$]=n.useState(0),[H,w]=n.useState(!1),[i,V]=n.useState(null),I={totalPosts:"0",totalViews:"0",totalLikes:"0",totalComments:"0",totalReshare:"0",avgER:0,avgReach:"0",influencerCount:0,platforms:[{name:"Instagram",followers:0,engagement:0,posts:0},{name:"Facebook",followers:0,engagement:0,posts:0},{name:"Twitter",followers:0,engagement:0,posts:0},{name:"LinkedIn",followers:0,engagement:0,posts:0}]};n.useEffect(()=>{(async()=>{try{f(!0),r(null);const a=await v.getCampaignAnalysis("1069");d(a)}catch(a){r(a instanceof Error?a.message:"Failed to fetch analytics data"),console.error("Error fetching analytics:",a)}finally{f(!1)}})()},[]),n.useEffect(()=>{(async()=>{try{j(!0),k(null);const a=await v.getInfluencerList("1069",1,b);y(a),a!=null&&a.data&&(M(a.data.totalPages||0),$(a.data.totalCount||0))}catch(a){k(a instanceof Error?a.message:"Failed to fetch influencer data"),console.error("Error fetching influencers:",a)}finally{j(!1)}})()},[b]);const E=async()=>{var s,a;if(!(x>=u||m))try{j(!0);const p=x+1,h=await v.getInfluencerList("1069",p,b);if((s=h==null?void 0:h.data)!=null&&s.result&&h.data.result.length>0){const D={...h,data:{...h.data,result:[...((a=c==null?void 0:c.data)==null?void 0:a.result)||[],...h.data.result]}};y(D),P(p)}}catch(p){console.error("Error loading more data:",p)}finally{j(!1)}},g=l!=null&&l.data?{totalPosts:l.data.total_posts||"0",totalViews:l.data.total_views||"0",totalLikes:l.data.total_likes||"0",totalComments:l.data.total_comments||"0",totalReshare:l.data.total_reshare||"0",avgER:l.data.avg_er||0,avgReach:l.data.avg_reach||"0",influencerCount:l.data.influencer_count||0,platforms:I.platforms}:I;return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Social Analytics",subName:"Track your social media performance"}),e.jsxs("div",{className:"container-fluid",children:[t&&e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12 text-center",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading analytics data..."})]})}),N&&e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),N,e.jsx("button",{className:"btn btn-sm btn-outline-danger ms-3",onClick:()=>window.location.reload(),children:"Retry"})]})})}),!t&&e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-dark text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:G(g.influencerCount)}),e.jsx("p",{className:"mb-0",children:"Influencers"})]}),e.jsx("i",{className:"fas fa-user-friends fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-primary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justiftotal_viewsy-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:g.totalPosts}),e.jsx("p",{className:"mb-0",children:"Total Posts"})]}),e.jsx("i",{className:"fas fa-file-alt fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-success text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:g.totalViews}),e.jsx("p",{className:"mb-0",children:"Total Views"})]}),e.jsx("i",{className:"fas fa-eye fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-warning text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:g.totalLikes}),e.jsx("p",{className:"mb-0",children:"Total Likes"})]}),e.jsx("i",{className:"fas fa-heart fa-2x opacity-75"})]})})})})]}),!t&&(l==null?void 0:l.data)&&e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-secondary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:g.totalReshare}),e.jsx("p",{className:"mb-0",children:"Total Reshares"})]}),e.jsx("i",{className:"fas fa-share fa-2x opacity-75"})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6",children:e.jsx("div",{className:"card bg-info text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:g.totalComments}),e.jsx("p",{className:"mb-0",children:"Total Comments"})]}),e.jsx("i",{className:"fas fa-comments fa-2x opacity-75"})]})})})})]}),e.jsxs(z,{id:"influencer-analytics",title:"Influencer Performance",description:"Detailed analytics by influencers in the campaign",children:[m&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading influencers..."})}),e.jsx("p",{className:"mt-2",children:"Loading influencer data..."})]}),C&&e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),C]}),!m&&((S=c==null?void 0:c.data)==null?void 0:S.result)&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Influencer"}),e.jsx("th",{children:"Views "}),e.jsx("th",{children:"Likes"}),e.jsx("th",{children:"Comments"}),e.jsx("th",{children:"Content ER"}),e.jsx("th",{children:"Reach"}),e.jsx("th",{children:"Shares"}),e.jsx("th",{children:"Post Actions"})]})}),e.jsx("tbody",{children:c.data.result.map((s,a)=>{var p;return e.jsxs("tr",{children:[e.jsx("td",{className:"fw-semibold",children:a+1}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"position-relative me-3",children:[e.jsx("img",{src:s.profile_pic_url,alt:s.fullname,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"},onError:h=>{h.target.src="https://via.placeholder.com/40x40/6c757d/ffffff?text="+s.fullname.charAt(0)}}),e.jsx("i",{className:"fab fa-instagram text-primary position-absolute",style:{fontSize:"12px",bottom:"-2px",right:"-2px",backgroundColor:"white",borderRadius:"50%",padding:"2px",border:"1px solid #dee2e6"}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold text-dark",children:s.fullname}),e.jsx("small",{className:"text-muted",children:s.handle})]})]})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:s.total_views})}),e.jsx("td",{children:s.total_likes==="0"?e.jsx("span",{className:"text-warning",children:"Hidden"}):e.jsx("span",{className:"fw-semibold",children:s.total_likes})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:s.total_comments})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:parseFloat(s.er).toFixed(2)})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:typeof s.reach=="number"?G(s.reach):s.reach})}),e.jsx("td",{children:e.jsx("span",{className:"fw-semibold",children:s.total_reshare_count})}),e.jsx("td",{children:e.jsx("img",{src:((p=s.posts[0])==null?void 0:p.display_url)||"https://via.placeholder.com/30x30/6c757d/ffffff",alt:"Post",className:"rounded",style:{width:"30px",height:"30px",objectFit:"cover",cursor:"pointer"},title:"View Post Details",onClick:()=>{V(s),w(!0)}})})]},s.influencer_id)})})]})}),!m&&u>0&&x<u&&e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{className:"btn btn-outline-primary",onClick:E,disabled:m,children:[e.jsx("i",{className:"fas fa-chevron-down me-2"}),"Load ",b," More"]})}),!m&&u>1&&e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4 gap-3",children:[e.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>{x>1&&(async()=>{try{j(!0);const a=await v.getInfluencerList("1069",1,b);a!=null&&a.data&&(y(a),P(1))}catch(a){console.error("Error loading first page:",a)}finally{j(!1)}})()},disabled:x===1||m,children:[e.jsx("i",{className:"fas fa-chevron-left me-1"}),"First"]}),e.jsxs("span",{className:"badge bg-primary fs-6 px-3 py-2",children:["Page ",x," of ",u]}),e.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:E,disabled:x>=u||m,children:["Next",e.jsx("i",{className:"fas fa-chevron-right ms-1"})]})]}),!m&&_>0&&e.jsx("div",{className:"text-center mt-3",children:e.jsxs("small",{className:"text-muted",children:["Showing ",((A=(L=c==null?void 0:c.data)==null?void 0:L.result)==null?void 0:A.length)||0," of ",_," influencers"]})})]})]}),H&&i&&e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>w(!1),children:e.jsx("div",{className:"modal-dialog modal-lg",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header border-0 pb-0",children:e.jsx("button",{type:"button",className:"btn-close",onClick:()=>w(!1)})}),e.jsx("div",{className:"modal-body pt-0",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("img",{src:((R=i.posts[0])==null?void 0:R.display_url)||"https://via.placeholder.com/400x400/6c757d/ffffff",alt:"Post",className:"img-fluid rounded",style:{width:"100%",maxHeight:"500px",objectFit:"cover"}})}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("div",{className:"position-relative me-3",children:[e.jsx("img",{src:i.profile_pic_url,alt:i.fullname,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("i",{className:"fab fa-instagram text-primary position-absolute",style:{fontSize:"12px",bottom:"-2px",right:"-2px",backgroundColor:"white",borderRadius:"50%",padding:"2px",border:"1px solid #dee2e6"}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:i.fullname}),e.jsx("small",{className:"text-muted",children:i.handle})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:((T=i.posts[0])==null?void 0:T.post_date)||"Oct 10, 2025"}),e.jsx("div",{className:"d-flex align-items-center justify-content-end"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-muted small",style:{fontSize:"12px",lineHeight:"1.4",maxHeight:"120px",overflowY:"auto"},children:((F=i.posts[0])==null?void 0:F.caption)||`#Collaboration

📢 Introducing the all-new
*#GalaxyM17 5G* - the Monster In Motion
at a *Special Launch Price* ~₹16499~ *₹12499* 🌟

🤳🏻 50MP No Shake Cam for blur-free videos

💪🏻 Durable Corning Gorilla Glass Victus and IP54 protection 🌟 7.5mm slim design

✨ Circle to Search | Google Gemini

6️⃣ Gen OS and Security updates

📲 sAMOLED Display | 1100 nits

*Sale starts: 13th October*
▶️Head over to Amazon to know more. @samsungindia
#GalaxyM17 5G #MonsterInMotion #LoveForMonster #Samsung #trendup
#ExploreGalaxy #trending #viral #viralreels`})}),e.jsxs("div",{className:"row g-2 mb-4",children:[e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"card border-0 text-center py-3",style:{background:"linear-gradient(135deg, #e91e63 0%, #f06292 100%)",borderRadius:"12px"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-2",style:{width:"36px",height:"36px",backgroundColor:"rgba(255,255,255,0.2)"},children:e.jsx("i",{className:"fas fa-heart text-white"})}),e.jsx("span",{className:"fw-bold text-white small",children:i.total_likes==="0"?"Hidden":i.total_likes}),e.jsx("small",{className:"text-white-50",children:"Likes"})]})})}),e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"card border-0 text-center py-3",style:{background:"linear-gradient(135deg, #2196f3 0%, #64b5f6 100%)",borderRadius:"12px"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-2",style:{width:"36px",height:"36px",backgroundColor:"rgba(255,255,255,0.2)"},children:e.jsx("i",{className:"fas fa-comment text-white"})}),e.jsx("span",{className:"fw-bold text-white small",children:i.total_comments}),e.jsx("small",{className:"text-white-50",children:"Comments"})]})})}),e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"card border-0 text-center py-3",style:{background:"linear-gradient(135deg, #4caf50 0%, #81c784 100%)",borderRadius:"12px"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-2",style:{width:"36px",height:"36px",backgroundColor:"rgba(255,255,255,0.2)"},children:e.jsx("i",{className:"fas fa-share text-white"})}),e.jsx("span",{className:"fw-bold text-white small",children:i.total_views}),e.jsx("small",{className:"text-white-50",children:"Views"})]})})})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("span",{className:"badge bg-dark me-2",children:[parseFloat(i.er).toFixed(2),"%"]}),e.jsx("small",{className:"text-muted",children:"ER"})]}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{var s;(s=i.posts[0])!=null&&s.post_link&&window.open(i.posts[0].post_link,"_blank")},children:"View More"})]})]})]})})]})})})]})};export{se as default};
