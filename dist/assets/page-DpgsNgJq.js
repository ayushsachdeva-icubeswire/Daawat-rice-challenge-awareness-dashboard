var q=Object.defineProperty;var ee=(i,t,a)=>t in i?q(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a;var N=(i,t,a)=>ee(i,typeof t!="symbol"?t+"":t,a);import{j as e,R as L,d as D,l as E,r as u,F as te}from"./index-Mfldx5Xv.js";import{I as k}from"./IconifyIcon-Dzv00Zlt.js";import{C as z,a as F,b as H}from"./Card-CRnFQbx4.js";import{B as $}from"./Badge-Dw0cEkVL.js";import{S as B}from"./Spinner-DqoUT6rx.js";import{B as T}from"./ListGroup-BVR5CF-N.js";import{f as R}from"./numberFormat-yIx-nKgv.js";import{R as Q}from"./react-apexcharts.min-xgM-T6SW.js";import{S as se}from"./Spinner-Bpu6KY2R.js";import{P as ae}from"./PageTitle-BpMhMHzJ.js";import{A as K}from"./api-ClkYFUjX.js";import{C as G}from"./campaignContentsService-C-3q-UIb.js";import{C as re}from"./challengerService-EOQPDQzg.js";import"./warning-DWec6hLd.js";import"./hook-O9kAs0JN.js";import"./extends-CF3RwP-h.js";import"./Nav-dsB8RIru.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-Bg84uE9A.js";import"./useMergedRefs-DcI5BJvp.js";import"./useEventCallback-nYE20XZC.js";import"./Button-DCAAVRMK.js";const ne=i=>{const t=new Date(i),r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"just now";if(r<3600){const n=Math.floor(r/60);return`${n} ${n===1?"minute":"minutes"} ago`}else if(r<86400){const n=Math.floor(r/3600);return`${n} ${n===1?"hour":"hours"} ago`}else{const n=Math.floor(r/86400);return`${n} ${n===1?"day":"days"} ago`}},ie=({challengers:i,title:t="Recent Challengers",showHeader:a=!0,maxHeight:r="400px",isLoading:n=!1,error:l=null,onTitleClick:o})=>{const c=s=>{switch(s.toLowerCase()){case"weight loss":return"#ef4444";case"muscle building":return"#10b981";case"endurance":return"#f59e0b";case"flexibility":return"#8b5cf6";default:return"#6b7280"}},d=s=>{switch(s.toLowerCase()){case"weight loss":return"danger";case"muscle building":return"success";case"endurance":return"warning";case"flexibility":return"info";default:return"secondary"}};return e.jsxs(z,{className:"h-100",children:[a&&e.jsxs(F,{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h5",{className:`card-title mb-0 ${o?"text-primary cursor-pointer":""}`,onClick:o,style:o?{cursor:"pointer"}:{},children:t}),e.jsx($,{bg:"primary",pill:!0,children:i.length})]}),e.jsx(H,{className:"p-0",children:e.jsx("div",{style:{maxHeight:r,overflowY:"auto"},children:n?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading challengers..."})]}):l?e.jsxs("div",{className:"text-center py-4 text-danger",children:[e.jsx(k,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:l})]}):e.jsx(T,{variant:"flush",children:i.length===0?e.jsxs(T.Item,{className:"text-center py-4 text-muted",children:[e.jsx(k,{icon:"solar:users-group-two-rounded-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No challengers available"})]}):i.map(s=>{var g;return e.jsx(T.Item,{className:"px-3 py-3",children:e.jsxs(L,{className:"align-items-start",children:[e.jsx(D,{xs:"auto",children:e.jsx("div",{className:"avatar-sm rounded-circle d-flex align-items-center justify-content-center",style:{backgroundColor:`${c(s.type)}20`,fontWeight:600,fontSize:"1.1rem",color:c(s.type)},children:(g=s.name)==null?void 0:g.charAt(0).toUpperCase()})}),e.jsxs(D,{children:[e.jsxs("p",{className:"text-muted mb-2 small",children:[e.jsx(k,{icon:"solar:phone-broken",className:"fs-12 me-1"}),s.mobile]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx($,{bg:d(s.type),className:"me-2",children:s.type}),e.jsx("span",{className:"text-muted small",children:s.category})]}),e.jsx("div",{className:"text-end",children:e.jsxs("div",{className:"text-primary fw-semibold small",children:[e.jsx(k,{icon:"solar:clock-circle-broken",className:"fs-12 me-1"}),s.duration]})})]}),s.subcategory&&e.jsx("div",{className:"mb-2",children:e.jsx($,{bg:"light",text:"dark",className:"small",children:s.subcategory})}),s.createdAt&&e.jsxs("div",{className:"d-flex align-items-center text-muted small",children:[e.jsx(k,{icon:"solar:calendar-broken",className:"fs-12 me-1"}),"Created ",ne(s.createdAt)]})]})]})},s._id)})})})})]})},oe=({posts:i,title:t="Recent Posts",showHeader:a=!0,maxHeight:r="400px",isLoading:n=!1,error:l=null,onTitleClick:o})=>{const c=s=>{if(!s)return"";const g=typeof s=="string"?parseInt(s):Number(s);if(isNaN(g)||g<=0)return"";const w=new Date(g*1e3),y=Math.floor((new Date().getTime()-w.getTime())/1e3);if(y<60)return"just now";if(y<3600){const j=Math.floor(y/60);return`${j} ${j===1?"minute":"minutes"} ago`}else if(y<86400){const j=Math.floor(y/3600);return`${j} ${j===1?"hour":"hours"} ago`}else{const j=Math.floor(y/86400);return`${j} ${j===1?"day":"days"} ago`}},d=s=>{const g=`https://www.instagram.com/${s}/#`;window.open(g,"_blank")};return e.jsxs(z,{className:"h-100",children:[a&&e.jsxs(F,{className:`d-flex align-items-center justify-content-between ${o?"user-select-none":""}`,style:{cursor:o?"pointer":"default",transition:o?"background-color 0.2s":"none"},onClick:o,title:o?"Click to open hashtag performance in new tab":"",onMouseEnter:s=>{o&&(s.currentTarget.style.backgroundColor="#f8f9fa")},onMouseLeave:s=>{o&&(s.currentTarget.style.backgroundColor="")},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0 me-2",children:t}),o&&e.jsx(k,{icon:"solar:external-link-broken",className:"fs-12 text-muted"})]}),e.jsx($,{bg:"primary",pill:!0,children:i.length})]}),e.jsx(H,{className:"p-0",children:e.jsx("div",{style:{maxHeight:r,overflowY:"auto"},children:e.jsx(T,{variant:"flush",children:n?e.jsxs(T.Item,{className:"text-center py-4 text-muted",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading campaign posts..."})]}):l?e.jsxs(T.Item,{className:"text-center py-4 text-muted",children:[e.jsx(k,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2 text-danger"}),e.jsx("p",{className:"text-danger",children:l})]}):i.length===0?e.jsxs(T.Item,{className:"text-center py-4 text-muted",children:[e.jsx(k,{icon:"solar:document-text-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No campaign posts available"})]}):i.map(s=>{var g,w,C,y,j,m;return e.jsx(T.Item,{className:"px-3 py-3",children:e.jsxs(L,{className:"align-items-start",children:[e.jsx(D,{xs:"auto",children:e.jsxs("div",{className:"rounded-circle overflow-hidden position-relative",style:{width:"40px",height:"40px",minWidth:"40px",minHeight:"40px"},children:[e.jsx("img",{src:((g=s.influencer)==null?void 0:g.profile_pic_url)||"/images/users/user-1.jpg",alt:s.influencer.full_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:f=>{const x=f.target;x.style.display="none";const A=x.nextElementSibling;A&&(A.style.display="flex")}}),e.jsx("div",{style:{width:"100%",height:"100%",display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",position:"absolute",top:"0",left:"0"},children:e.jsx(k,{icon:"solar:user-broken",className:"fs-18 text-muted"})})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-2",children:[e.jsxs("div",{className:"flex-grow-1 me-2",children:[e.jsx("h6",{className:"mb-1 text-truncate",children:e.jsxs("span",{className:"text-primary",style:{cursor:"pointer",textDecoration:"none"},onClick:()=>{var f,x;return d(((f=s.influencer)==null?void 0:f.handle)||((x=s.influencer)==null?void 0:x.username)||"")},onMouseEnter:f=>{f.currentTarget.style.textDecoration="underline"},onMouseLeave:f=>{f.currentTarget.style.textDecoration="none"},title:`Open @${((w=s.influencer)==null?void 0:w.handle)||((C=s.influencer)==null?void 0:C.username)||""} on Instagram`,children:["@",String(((y=s.influencer)==null?void 0:y.handle)||((j=s.influencer)==null?void 0:j.username)||"Unknown")]})}),e.jsx("div",{className:"d-flex align-items-center text-muted small mb-1",children:e.jsx("span",{className:"me-2",children:String(((m=s.influencer)==null?void 0:m.full_name)||"")})})]}),e.jsx("div",{className:"text-end",children:e.jsx("div",{className:`badge small ${s.is_paid_partnership?"bg-success-subtle text-success":"bg-primary-subtle text-primary"}`,children:s.is_paid_partnership?"Collaborated":"Organic"})})]}),e.jsx("p",{className:"text-muted mb-2 small",children:(()=>{let f="";if(s.caption){const x=s.caption;typeof x=="object"&&x[0]&&x[0].text?f=String(x[0].text):typeof x=="string"&&(f=x)}return f&&f.length>150&&(f=f.substring(0,150)+"..."),f||"No caption available"})()}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[Array.isArray(s.hashtags)&&s.hashtags.slice(0,2).map((f,x)=>e.jsx($,{bg:"light",text:"dark",className:"me-1 small",children:String(f||"")},x)),Array.isArray(s.hashtags)&&s.hashtags.length>2&&e.jsxs("span",{className:"text-muted small",children:["+",s.hashtags.length-2," more"]})]}),e.jsx("small",{className:"text-muted",children:String(c(s.created_timestamp)||"")})]}),e.jsx("div",{className:"d-flex align-items-center justify-content-between",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(k,{icon:"solar:heart-broken",className:"fs-12 me-1 text-danger"}),e.jsx("span",{className:"small text-muted",children:String(R(Number(s.total_likes)||0))})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(k,{icon:"solar:chat-round-line-broken",className:"fs-12 me-1 text-primary"}),e.jsx("span",{className:"small text-muted",children:String(R(Number(s.total_comments)||0))})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(k,{icon:"solar:share-broken",className:"fs-12 me-1 text-success"}),e.jsx("span",{className:"small text-muted",children:String(R(Number(s.reshare_count)||0))})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(k,{icon:"solar:eye-broken",className:"fs-12 me-1 text-muted"}),e.jsx("span",{className:"small text-muted",children:String(R(Number(s.reach)||0))})]})]})})]})]})},s._id)})})})})]})},le=({challengrsGraphData:i,isLoading:t=!1,error:a=null})=>{const n=(()=>{if(!i||i.length===0)return{categories:["No Data"],completedData:[0],inProgressData:[0]};const o=i.map(s=>new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),c=i.map(s=>s.Completed),d=i.map(s=>s.InProgress);return{categories:o,completedData:c,inProgressData:d}})(),l={chart:{type:"bar",height:350,toolbar:{show:!1}},series:[{name:"Completed",data:n.completedData,color:"#10b981"},{name:"Challenges Taken",data:n.inProgressData,color:"#3b82f6"}],xaxis:{categories:n.categories,labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1},legend:{show:!1,position:"top",horizontalAlign:"right"},tooltip:{theme:"light"}};return e.jsxs(z,{children:[e.jsx(F,{children:e.jsx("h5",{className:"card-title mb-0",children:"Challenges Progress"})}),e.jsx(H,{children:t?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading chart data..."})]}):a?e.jsxs("div",{className:"text-center py-4 text-danger",children:[e.jsx(k,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:a})]}):e.jsx(Q,{options:l,series:l.series,type:"bar",height:350})})]})},ce=({postGraphData:i=[],isLoading:t=!1,error:a=null})=>{const n=(()=>{if(Array.isArray(i)&&i.length>0){const o=i.map(c=>({timestamp:c.x,date:new Date(c.x).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:c.y})).sort((c,d)=>c.timestamp-d.timestamp);return{categories:o.map(c=>c.date),publishedData:o.map(c=>c.value),timestamps:o.map(c=>c.timestamp)}}return{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],publishedData:[5,8,12,15,18,22,25,28,32,35,38,42],timestamps:[]}})(),l={chart:{type:"area",height:350,toolbar:{show:!1}},series:[{name:"Interactions",data:n.publishedData,color:"#f59e0b"}],xaxis:{categories:n.categories,labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3,stops:[0,90,100]}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"light"}};return e.jsxs(z,{children:[e.jsx(F,{children:e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsx("h5",{className:"card-title mb-0",children:"Hashtag Interactions"})})}),e.jsx(H,{children:t?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"350px"},children:e.jsx(se,{})}):a?e.jsx("div",{className:"d-flex justify-content-center align-items-center text-danger",style:{height:"350px"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"mdi mdi-alert-circle-outline fs-2 mb-2"}),e.jsx("p",{className:"mb-0",children:a})]})}):e.jsx(Q,{options:l,series:l.series,type:"area",height:350})})]})},W=i=>{var t,a,r;try{const n=(t=E.getCookie("_DARKONE_AUTH_KEY_"))==null?void 0:t.toString();if(n){const o=JSON.parse(n);if(o!=null&&o.token)return o.token}const l=(a=E.getCookie("token"))==null?void 0:a.toString();return i||l||localStorage.getItem("authToken")||""}catch(n){console.warn("Failed to get auth token from session:",n);const l=(r=E.getCookie("token"))==null?void 0:r.toString();return i||l||localStorage.getItem("authToken")||""}},_=class _{constructor(){N(this,"fallbackToken","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ZThkMjQxYzkyMWE5ZDEzMzhmNGMwMyIsImlhdCI6MTc2MDU5NDU5MiwiZXhwIjoxNzYwNjgwOTkyfQ.9ttWBQlQj6pDY-9mJp4gwGdvHbFJlGzWciWAnHPxzls")}static getInstance(){return _.instance||(_.instance=new _),_.instance}async getChallengerProgress(){try{const t=W(this.fallbackToken);if(!t)return console.warn("Authentication token not found, using mock data."),this.getMockProgressData();const a=await fetch(`${K.API_URL}/challenger/progress`,{method:"GET",headers:{authorization:t,"Content-Type":"application/json"}});if(!a.ok){const n=await a.json().catch(()=>({message:"Failed to fetch progress data"}));if(a.status===401||n.message==="Unauthorized!")return console.warn("Using mock data due to authentication failure. Please check your token."),this.getMockProgressData();throw new Error(n.message||`HTTP ${a.status}: Failed to fetch progress data`)}return await a.json()}catch(t){if(console.error("Progress API Error:",t),t.name==="TypeError"&&t.message.includes("fetch"))return console.warn("Network error detected, using mock data."),this.getMockProgressData();throw new Error(t.message||"Failed to fetch progress data")}}getMockProgressData(){return{data:{erProgress:{_id:"68f09870df697dec080d18fa",name:"engagement",currentValue:483408,previousValue:483398,manualEntries:10,difference:10,createdAt:"2025-10-16T07:02:08.496Z",updatedAt:"2025-10-16T07:02:08.496Z",__v:0},challengerProgress:{_id:"68f0c1e2f4275b75860cbf9e",name:"challenge",currentValue:3,previousValue:2,manualEntries:0,difference:1,createdAt:"2025-10-16T09:58:58.000Z",updatedAt:"2025-10-16T09:58:58.000Z",__v:0}}}}setAuthToken(t){this.fallbackToken=t}getAuthToken(){return W(this.fallbackToken)}};N(_,"instance");let O=_;const de=O.getInstance();class he{constructor(t){N(this,"el");N(this,"piece");N(this,"top");N(this,"bottom");N(this,"back");N(this,"backBottom");N(this,"currentValue");const a=document.createElement("span");a.className="flip-clock__wrapper1";const r=document.createElement("span");r.className="flip-clock__piece m-0",r.innerHTML='<b class="flip-clock__card card1"><b class="card__top"></b><b class="card__bottom"></b><b class="card__back"><b class="card__bottom"></b></b></b>',a.appendChild(r),this.el=a,this.piece=r,this.top=r.querySelector(".card__top"),this.bottom=r.querySelector(".card__bottom"),this.back=r.querySelector(".card__back"),this.backBottom=r.querySelector(".card__back .card__bottom"),this.currentValue="",this.update(t)}update(t,a=!1){const r=t.toString(),n=r!==this.currentValue;(n||a)&&(this.back.setAttribute("data-value",this.currentValue),this.bottom.setAttribute("data-value",this.currentValue),this.currentValue=r,this.top.textContent=r,this.backBottom.setAttribute("data-value",r),(n||a)&&(this.el.classList.remove("flip"),this.el.offsetWidth,this.el.classList.add("flip")))}updateInstant(t){const a=t.toString();this.currentValue=a,this.top.textContent=a,this.back.setAttribute("data-value",a),this.bottom.setAttribute("data-value",a),this.backBottom.setAttribute("data-value",a)}}class ue{constructor(t,a=0){N(this,"container");N(this,"value");N(this,"digits");this.container=t,this.value=a,this.digits=[],this.render()}render(){this.container.innerHTML="";const t=this.value.toString();this.digits=[];for(let a=0;a<t.length;a++){const r=new he(t[a]);this.container.appendChild(r.el),this.digits.push(r)}}update(){const t=this.value.toString();if(t.length>this.digits.length)this.render();else for(let a=0;a<this.digits.length;a++){const r=t.length-this.digits.length+a,n=r>=0?t[r]:"0";this.digits[a].update(n)}}setValue(t){this.value=t,this.update()}setValueWithAnimation(t,a){const r=t.toString(),n=a.toString(),l=Math.max(r.length,n.length),o=r.padStart(l,"0"),c=n.padStart(l,"0");if(r.length>this.digits.length){this.value=t,this.render();return}this.value=t;for(let d=0;d<this.digits.length;d++){const s=o.length-this.digits.length+d,g=s>=0?o[s]:"0",w=s>=0&&s<c.length?c[s]:"0";g!==w?this.digits[d].update(g,!0):this.digits[d].updateInstant(g)}}setValueInstant(t){const a=t.toString();if(a.length>this.digits.length){this.value=t,this.render();return}this.value=t;for(let r=0;r<this.digits.length;r++){const n=a.length-this.digits.length+r,l=n>=0?a[n]:"0";this.digits[r].updateInstant(l)}}}const Z=({progressType:i,label:t,className:a="",animationDuration:r=5e3,pollInterval:n=1e4})=>{const l=u.useRef(null),o=u.useRef(null),c=u.useRef(null),d=u.useRef(null),[s,g]=u.useState(null),[w,C]=u.useState(!1),y=u.useRef(0),j=u.useCallback(async()=>{try{const h=(await de.getChallengerProgress()).data[i];if(h)return g(h),h;console.warn(`${i}: No data found in API response`)}catch(b){console.error(`${i}: Error fetching data:`,b)}return null},[i]),m=u.useRef(),f=u.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{try{const b=await j();if(b){if(w){setTimeout(()=>{var v;return(v=m.current)==null?void 0:v.call(m)},2e3);return}const h=y.current;if(b.currentValue!==h){const v=b.currentValue-h;g(b),x.current&&x.current(h,b.currentValue,v)}else setTimeout(()=>{m.current&&m.current()},100)}else console.warn(`${i}: Failed to fetch data, retrying in ${n}ms`),setTimeout(()=>{var h;return(h=m.current)==null?void 0:h.call(m)},n)}catch(b){console.error(`${i}: Error during API polling:`,b),setTimeout(()=>{var h;return(h=m.current)==null?void 0:h.call(m)},n)}},n)},[i,n,j]);m.current=f;const x=u.useRef(),A=u.useCallback((b,h,p)=>{if(b===h){o.current&&o.current.setValueInstant(h),y.current=h,setTimeout(()=>{m.current&&m.current()},100);return}C(!0);const v=Math.abs(p),I=Math.max(5,Math.min(v,50)),P=r/I,X=p/I;let V=0,S=b;c.current&&clearInterval(c.current),c.current=setInterval(()=>{V++;const U=S;if(S=Math.round(b+X*V),p>0&&S>=h||p<0&&S<=h||V>=I){S=h,o.current&&o.current.setValueWithAnimation(S,U),y.current=S,c.current&&(clearInterval(c.current),c.current=null),setTimeout(()=>{C(!1),m.current&&m.current()},100);return}o.current&&o.current.setValueWithAnimation(S,U)},P)},[r,i]);return x.current=A,u.useEffect(()=>l.current?((async()=>{const h=await j();if(h){const p=h.previousValue;y.current=p;const v=new ue(l.current,p);o.current=v,A(h.previousValue,h.currentValue,h.difference)}else console.warn(`${i}: No initial data received`),setTimeout(()=>{m.current&&m.current()},1e3)})(),()=>{c.current&&clearInterval(c.current),d.current&&clearTimeout(d.current),l.current&&(l.current.innerHTML="")}):void 0,[]),e.jsxs("div",{className:`card h-100 border-0 ${a}`,style:{background:"linear-gradient(180deg, #ffffff 0%, #f7f7f7 100%)",border:"1px solid #e6e6e6",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.6)",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"2px",background:"linear-gradient(to right, #d4af37, transparent)",opacity:.5}}),e.jsxs("div",{className:"card-body d-flex flex-column justify-content-center align-items-center text-center p-4",children:[e.jsx("div",{className:"flip-counter-container w-100 mb-3",children:e.jsx("div",{className:"d-flex gap-2 justify-content-center",children:e.jsx("div",{ref:l,className:"flip-clock"})})}),e.jsx("div",{style:{width:"40%",height:"2px",background:"linear-gradient(to right, transparent, #c9a73b, transparent)",marginBottom:"12px"}}),e.jsxs("h6",{className:"card-title fw-semibold mb-0",style:{color:"#2e2e2e",fontSize:"0.95rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:[t,w&&e.jsx("span",{className:"ms-2 text-primary",children:"ðŸ”„"})]}),e.jsx("div",{style:{width:"30%",height:"1px",backgroundColor:"#e0e0e0",marginTop:"10px"}}),s&&e.jsx("div",{className:"text-center mt-2",children:e.jsx("small",{className:"text-muted",style:{fontSize:"0.8rem",letterSpacing:"0.3px",opacity:.8},children:e.jsx("span",{className:`badge ${s.difference>0?"bg-success":s.difference<0?"bg-danger":"bg-secondary"}`})})})]}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"3px",background:"linear-gradient(to right, transparent, #d4af37, transparent)",opacity:.3}})]})},Y=i=>{var t,a,r;try{const n=(t=E.getCookie("_DARKONE_AUTH_KEY_"))==null?void 0:t.toString();if(n){const o=JSON.parse(n);if(o!=null&&o.token)return o.token}const l=(a=E.getCookie("token"))==null?void 0:a.toString();return i||l||localStorage.getItem("authToken")||""}catch(n){console.warn("Failed to get auth token from session:",n);const l=(r=E.getCookie("token"))==null?void 0:r.toString();return i||l||localStorage.getItem("authToken")||""}},M=class M{constructor(){N(this,"fallbackToken","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ZThkMjQxYzkyMWE5ZDEzMzhmNGMwMyIsImlhdCI6MTc2MDQyMzkyMiwiZXhwIjoxNzYwNTEwMzIyfQ.jpyOCiQ_lunYouOyLSOXTWOJ3pDfWGg0JKxd9Rgparo")}static getInstance(){return M.instance||(M.instance=new M),M.instance}async getDashboardData(){try{const t=Y(this.fallbackToken);if(!t)return console.warn("Authentication token not found, using mock data."),this.getMockDashboardData();const a=await fetch(`${K.API_URL}/dashboard`,{method:"GET",headers:{authorization:t,"Content-Type":"application/json"}});if(!a.ok){const n=await a.json().catch(()=>({message:"Failed to fetch dashboard data"}));if(a.status===401||n.message==="Unauthorized!")return console.warn("Using mock data due to authentication failure. Please check your token."),this.getMockDashboardData();throw new Error(n.message||`HTTP ${a.status}: Failed to fetch dashboard data`)}return await a.json()}catch(t){if(console.error("Dashboard API Error:",t),t.name==="TypeError"&&t.message.includes("fetch"))return console.warn("Network error detected, using mock data."),this.getMockDashboardData();throw new Error(t.message||"Failed to fetch dashboard data")}}getMockDashboardData(){return{totalStories:25,totalViews:15e3,totalLikes:12500,challengrsGraphData:[{date:"2025-10-13T00:00:00.000Z",Completed:0,InProgress:1},{date:"2025-10-16T00:00:00.000Z",Completed:0,InProgress:2}],postGraphData:{itchotels:[{x:170424e7,y:2},{x:17073504e5,y:3},{x:170856e7,y:4},{x:17099424e5,y:5},{x:17183232e5,y:3},{x:17241984e5,y:6},{x:17320608e5,y:4},{x:1737936e6,y:7},{x:17479584e5,y:5},{x:17555616e5,y:8},{x:17576352e5,y:6},{x:175824e7,y:9}],itchotels_count:25}}}setAuthToken(t){this.fallbackToken=t}getAuthToken(){return Y(this.fallbackToken)}};N(M,"instance");let J=M;const me=J.getInstance(),ze=()=>{const[i,t]=u.useState([]),[a,r]=u.useState(!0),[n,l]=u.useState(null),[o]=u.useState("all"),c=[{value:"all",label:"All Hashtags",display:"All Hashtags"},{value:"onlydaawatnovember",label:"#onlydaawatnovember",display:"#onlydaawatnovember"},{value:"onlyricenovember",label:"#onlyricenovember",display:"#onlyricenovember"},{value:"riceyourawareness",label:"#riceyourawareness",display:"#riceyourawareness"}],[d,s]=u.useState(null),[g,w]=u.useState(!0),[C,y]=u.useState(null),[j,m]=u.useState([]),[f,x]=u.useState(!0),[A,b]=u.useState(null);return u.useEffect(()=>{(async()=>{try{w(!0),y(null);const p=await me.getDashboardData();s(p)}catch(p){y("Failed to fetch dashboard data"),console.error("Error fetching dashboard data:",p)}finally{w(!1)}})()},[]),u.useEffect(()=>{(async()=>{try{r(!0);let p=o,v=[];o==="all"&&(v=c.filter(P=>P.value!=="all").map(P=>P.value));let I;o==="all"?I=await G.getMultipleHashtagsPerformance(v,1,10):I=await G.getCampaignContents(p,1,10),I.success&&I.data.posts?t(I.data.posts):t([])}catch(p){l("Failed to fetch campaign contents"),console.error("Error fetching campaign contents:",p),t([])}finally{r(!1)}})()},[o]),u.useEffect(()=>{(async()=>{try{x(!0),b(null);const p=await re.getAllChallengers({limit:10,page:1});p.data&&m(p.data)}catch(p){b("Failed to fetch challengers"),console.error("Error fetching challengers:",p)}finally{x(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(ae,{subName:"Daawat",title:"Dashboard Analytics"}),e.jsxs(L,{className:"mb-4",children:[e.jsx(D,{xl:6,lg:6,md:12,children:e.jsx(Z,{progressType:"challengerProgress",label:"Challenges Taken",className:"h-100",animationDuration:5e3,pollInterval:15e3})}),e.jsx(D,{xl:6,lg:6,md:12,children:e.jsx(Z,{progressType:"erProgress",label:"Interactions (Hashtags + Stories)",className:"h-100",animationDuration:5e3,pollInterval:15e3})})]}),e.jsx("div",{className:"mb-4"}),e.jsxs(L,{className:"mb-4 g-3",children:[e.jsx(D,{xl:6,lg:6,md:12,children:e.jsx(le,{challengrsGraphData:(d==null?void 0:d.challengrsGraphData)||[],isLoading:g,error:C})}),e.jsx(D,{xl:6,lg:6,md:12,children:e.jsx(ce,{postGraphData:Array.isArray(d==null?void 0:d.postGraphData)?d.postGraphData:[],isLoading:g,error:C})})]}),e.jsxs(L,{className:"mb-4 g-3",children:[e.jsx(D,{xl:6,lg:6,md:12,children:e.jsx(ie,{challengers:j,title:"Recent Challengers",showHeader:!0,maxHeight:"400px",isLoading:f,error:A,onTitleClick:()=>window.open("/challengers","_blank"),challengrsGraphData:(d==null?void 0:d.challengrsGraphData)||[]})}),e.jsx(D,{xl:6,lg:12,md:12,children:e.jsx(oe,{posts:i,title:"Recent Posts",showHeader:!0,maxHeight:"400px",isLoading:a,error:n,onTitleClick:()=>window.open("/social/hashtag-performance","_blank")})})]}),e.jsx(te,{})]})};export{ze as default};
