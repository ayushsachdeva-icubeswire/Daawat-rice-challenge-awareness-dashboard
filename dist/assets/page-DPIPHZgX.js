import{j as e,R as b,d,e as $,r as v,F as I}from"./index-CQoIeUZd.js";import{I as c}from"./IconifyIcon-CUdZ2bbF.js";import{R as C}from"./react-apexcharts.min-By0_0pHH.js";import{C as N,a as w,b as k}from"./Card-BKwV0xe3.js";import{B as j,g as P,a as D}from"./mockData-D4OpgOut.js";import{B as p}from"./ListGroup-B_LOqvev.js";import{P as M}from"./ProgressBar-Cnr90IGQ.js";import{P as S}from"./PageTitle-r1R6ZAE-.js";import{C as _}from"./campaignContentsService-DCiZN_AJ.js";import"./warning-kD2yLmJa.js";import"./hook-ILHwkxll.js";import"./extends-CF3RwP-h.js";import"./Nav-DNjcvOr4.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-cfaBnyx5.js";import"./useMergedRefs-C_sYzPN2.js";import"./useEventCallback-DsigtgEy.js";import"./Button-8NGCVDuw.js";import"./ElementChildren-Bk8xUZer.js";const L=({count:a,icon:o,series:n,title:r,color:m="#7e67fe",trend:x="neutral",trendValue:l,onClick:h})=>{const f={chart:{type:"area",height:50,sparkline:{enabled:!0}},series:[{data:n}],stroke:{width:2,curve:"smooth"},markers:{size:0},colors:[m],tooltip:{fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:function(){return""}}},marker:{show:!1}},fill:{opacity:[1],type:["gradient"],gradient:{type:"vertical",inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,100]}}},t=()=>{switch(x){case"up":return"solar:arrow-up-broken";case"down":return"solar:arrow-down-broken";default:return"solar:minus-broken"}},s=()=>{switch(x){case"up":return"text-success";case"down":return"text-danger";default:return"text-muted"}};return e.jsxs(N,{className:`${h?"cursor-pointer":""} hover-shadow transition-all`,onClick:h,style:{cursor:h?"pointer":"default"},children:[e.jsx(w,{children:e.jsxs(b,{children:[e.jsxs(d,{xs:8,children:[e.jsx("p",{className:"text-muted mb-1 text-truncate",children:r}),e.jsx("h3",{className:"text-dark mt-1 mb-1",children:a}),l&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(c,{icon:t(),className:`fs-12 me-1 ${s()}`}),e.jsx("span",{className:`fs-12 ${s()}`,children:l})]})]}),e.jsx(d,{xs:4,children:e.jsx("div",{className:"ms-auto avatar-md rounded",style:{backgroundColor:`${m}20`},children:e.jsx(c,{style:{padding:"12px"},icon:o,className:"fs-32 avatar-title",color:m})})})]})}),e.jsx(C,{options:f,series:f.series,height:50,type:"area"})]})},A=({cardsData:a,onCardClick:o})=>e.jsx(b,{className:"g-3",children:a.map((n,r)=>e.jsx(d,{sm:6,lg:4,children:e.jsx(L,{...n,onClick:o?()=>o(r,n):void 0})},r))}),E=a=>{const n=Math.floor((new Date().getTime()-a.getTime())/1e3);if(n<60)return"just now";if(n<3600){const r=Math.floor(n/60);return`${r} ${r===1?"minute":"minutes"} ago`}else if(n<86400){const r=Math.floor(n/3600);return`${r} ${r===1?"hour":"hours"} ago`}else{const r=Math.floor(n/86400);return`${r} ${r===1?"day":"days"} ago`}},T=({challenges:a,title:o="Active Challenges",showHeader:n=!0,maxHeight:r="400px"})=>{const m=t=>{switch(t){case"easy":return"#10b981";case"medium":return"#f59e0b";case"hard":return"#ef4444";default:return"#6b7280"}},x=t=>{switch(t){case"easy":return"success";case"medium":return"warning";case"hard":return"danger";default:return"secondary"}},l=t=>{switch(t){case"completed":return"success";case"in-progress":return"primary";case"failed":return"danger";default:return"secondary"}},h=t=>{switch(t){case"completed":return"solar:check-circle-broken";case"in-progress":return"solar:play-circle-broken";case"failed":return"solar:close-circle-broken";default:return"solar:pause-circle-broken"}},f=t=>{switch(t.toLowerCase()){case"programming":return"solar:code-broken";case"web design":return"solar:palette-broken";case"react":return"solar:atom-broken";case"backend":return"solar:server-broken";case"design":return"solar:magic-stick-3-broken";default:return"solar:bookmark-broken"}};return e.jsxs(N,{className:"h-100",children:[n&&e.jsxs(k,{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h5",{className:"card-title mb-0",children:o}),e.jsx(j,{bg:"primary",pill:!0,children:a.length})]}),e.jsx(w,{className:"p-0",children:e.jsx("div",{style:{maxHeight:r,overflowY:"auto"},children:e.jsx(p,{variant:"flush",children:a.length===0?e.jsxs(p.Item,{className:"text-center py-4 text-muted",children:[e.jsx(c,{icon:"solar:cup-star-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No challenges available"})]}):a.map(t=>e.jsx(p.Item,{className:"px-3 py-3",children:e.jsxs(b,{className:"align-items-start",children:[e.jsx(d,{xs:"auto",children:e.jsx("div",{className:"avatar-sm rounded-circle d-flex align-items-center justify-content-center",style:{backgroundColor:`${m(t.difficulty)}20`},children:e.jsx(c,{icon:f(t.category),className:"fs-18",color:m(t.difficulty)})})}),e.jsxs(d,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h6",{className:"mb-0 text-truncate flex-grow-1 me-2",children:t.title}),e.jsxs(j,{bg:l(t.status),className:"d-flex align-items-center",children:[e.jsx(c,{icon:h(t.status),className:"fs-12 me-1"}),t.status.replace("-"," ")]})]}),e.jsx("p",{className:"text-muted mb-2 small",children:t.description}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(j,{bg:x(t.difficulty),className:"me-2",children:t.difficulty}),e.jsx("span",{className:"text-muted small",children:t.category})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{className:"text-primary fw-semibold small",children:[t.points," pts"]}),e.jsxs("div",{className:"text-muted small",children:[t.participantCount," participants"]})]})]}),t.status==="in-progress"&&t.startDate&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsx("small",{className:"text-muted",children:"Progress"}),e.jsxs("small",{className:"text-muted",children:["Started ",E(t.startDate)]})]}),e.jsx(M,{now:65,variant:"primary",style:{height:"4px"}})]}),t.timeLimit&&e.jsxs("div",{className:"d-flex align-items-center text-muted small",children:[e.jsx(c,{icon:"solar:clock-circle-broken",className:"fs-12 me-1"}),t.timeLimit," minutes"]})]})]})},t.id))})})})]})},R=({posts:a,title:o="Recent Posts",showHeader:n=!0,maxHeight:r="400px",isLoading:m=!1,error:x=null,onTitleClick:l})=>{const h=s=>{const i=new Date(s*1e3),u=Math.floor((new Date().getTime()-i.getTime())/1e3);if(u<60)return"just now";if(u<3600){const g=Math.floor(u/60);return`${g} ${g===1?"minute":"minutes"} ago`}else if(u<86400){const g=Math.floor(u/3600);return`${g} ${g===1?"hour":"hours"} ago`}else{const g=Math.floor(u/86400);return`${g} ${g===1?"day":"days"} ago`}},f=(s,i=100)=>s.length>i?`${s.substring(0,i)}...`:s,t=s=>{const i=`https://www.instagram.com/${s}/#`;window.open(i,"_blank")};return e.jsxs(N,{className:"h-100",children:[n&&e.jsxs(k,{className:`d-flex align-items-center justify-content-between ${l?"user-select-none":""}`,style:{cursor:l?"pointer":"default",transition:l?"background-color 0.2s":"none"},onClick:l,title:l?"Click to open hashtag performance in new tab":"",onMouseEnter:s=>{l&&(s.currentTarget.style.backgroundColor="#f8f9fa")},onMouseLeave:s=>{l&&(s.currentTarget.style.backgroundColor="")},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0 me-2",children:o}),l&&e.jsx(c,{icon:"solar:external-link-broken",className:"fs-12 text-muted"})]}),e.jsx(j,{bg:"primary",pill:!0,children:a.length})]}),e.jsx(w,{className:"p-0",children:e.jsx("div",{style:{maxHeight:r,overflowY:"auto"},children:e.jsx(p,{variant:"flush",children:m?e.jsxs(p.Item,{className:"text-center py-4 text-muted",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading campaign posts..."})]}):x?e.jsxs(p.Item,{className:"text-center py-4 text-muted",children:[e.jsx(c,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2 text-danger"}),e.jsx("p",{className:"text-danger",children:x})]}):a.length===0?e.jsxs(p.Item,{className:"text-center py-4 text-muted",children:[e.jsx(c,{icon:"solar:document-text-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No campaign posts available"})]}):a.map(s=>e.jsx(p.Item,{className:"px-3 py-3",children:e.jsxs(b,{className:"align-items-start",children:[e.jsx(d,{xs:"auto",children:e.jsxs("div",{className:"rounded-circle overflow-hidden position-relative",style:{width:"40px",height:"40px",minWidth:"40px",minHeight:"40px"},children:[e.jsx("img",{src:s.influencer.profile_pic_url,alt:s.influencer.full_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:i=>{const y=i.target;y.style.display="none";const u=y.nextElementSibling;u&&(u.style.display="flex")}}),e.jsx("div",{style:{width:"100%",height:"100%",display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",position:"absolute",top:"0",left:"0"},children:e.jsx(c,{icon:"solar:user-broken",className:"fs-18 text-muted"})})]})}),e.jsxs(d,{children:[e.jsx("div",{className:"d-flex align-items-start justify-content-between mb-2",children:e.jsxs("div",{className:"flex-grow-1 me-2",children:[e.jsx("h6",{className:"mb-1 text-truncate",children:e.jsxs("span",{className:"text-primary",style:{cursor:"pointer",textDecoration:"none"},onClick:()=>t(s.influencer.username),onMouseEnter:i=>{i.currentTarget.style.textDecoration="underline"},onMouseLeave:i=>{i.currentTarget.style.textDecoration="none"},title:`Open @${s.influencer.username} on Instagram`,children:["@",s.influencer.username]})}),e.jsxs("div",{className:"d-flex align-items-center text-muted small mb-1",children:[e.jsxs("span",{className:"me-2",children:[" ",s.influencer.full_name]}),e.jsx(j,{bg:"outline-primary",text:"primary",className:"me-2",children:s.is_video?"Video":s.is_carousel?"Carousel":"Photo"})]})]})}),e.jsx("p",{className:"text-muted mb-2 small",children:f(s.caption)}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[s.hashtags.slice(0,2).map((i,y)=>e.jsx(j,{bg:"light",text:"dark",className:"me-1 small",children:i},y)),s.hashtags.length>2&&e.jsxs("span",{className:"text-muted small",children:["+",s.hashtags.length-2," more"]})]}),e.jsx("small",{className:"text-muted",children:h(s.created_timestamp)})]}),e.jsx("div",{className:"d-flex align-items-center justify-content-between",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(c,{icon:"solar:heart-broken",className:"fs-12 me-1 text-danger"}),e.jsx("span",{className:"small text-muted",children:s.total_likes})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(c,{icon:"solar:chat-round-line-broken",className:"fs-12 me-1 text-primary"}),e.jsx("span",{className:"small text-muted",children:s.total_comments})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(c,{icon:"solar:share-broken",className:"fs-12 me-1 text-success"}),e.jsx("span",{className:"small text-muted",children:s.reshare_count||0})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(c,{icon:"solar:eye-broken",className:"fs-12 me-1 text-muted"}),e.jsx("span",{className:"small text-muted",children:s.reach})]})]})})]})]})},s._id))})})})]})},F=()=>{const a={chart:{type:"bar",height:350,toolbar:{show:!1}},series:[{name:"Completed",data:[8,12,15,18,22,25,28,32,35,38,42,45],color:"#10b981"},{name:"In Progress",data:[5,8,10,12,15,18,20,23,25,28,30,32],color:"#3b82f6"},{name:"Not Started",data:[12,18,22,25,28,30,32,35,38,40,42,45],color:"#6b7280"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(N,{children:[e.jsx(k,{children:e.jsx("h5",{className:"card-title mb-0",children:"Challenges Progress"})}),e.jsx(w,{children:e.jsx(C,{options:a,series:a.series,type:"bar",height:350})})]})},B=()=>{const a={chart:{type:"area",height:350,toolbar:{show:!1}},series:[{name:"Published Posts",data:[5,8,12,15,18,22,25,28,32,35,38,42],color:"#f59e0b"},{name:"Draft Posts",data:[2,3,4,5,6,7,8,9,10,11,12,13],color:"#8b5cf6"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3,stops:[0,90,100]}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(N,{children:[e.jsx(k,{children:e.jsx("h5",{className:"card-title mb-0",children:"Posts Analytics"})}),e.jsx(w,{children:e.jsx(C,{options:a,series:a.series,type:"area",height:350})})]})},ne=()=>{const a=$(),o=P(),[n,r]=v.useState([]),[m,x]=v.useState(!0),[l,h]=v.useState(null);v.useEffect(()=>{(async()=>{try{x(!0);const s=await _.getCampaignContents("daawatbiryani",1,10);s.success&&s.data.posts&&r(s.data.posts)}catch(s){h("Failed to fetch campaign contents"),console.error("Error fetching campaign contents:",s)}finally{x(!1)}})()},[]);const f=(t,s)=>{switch(s.title){case"Challenges Taken":a("/challenges");break;case"Total Posts":a("/posts");break;case"Completed Challenges":a("/challenges");break;default:console.log("Card clicked:",s.title)}};return e.jsxs(e.Fragment,{children:[e.jsx(S,{subName:"Daawat",title:"Dashboard Analytics"}),e.jsx("div",{className:"mb-4",children:e.jsx(A,{cardsData:o,onCardClick:f})}),e.jsxs(b,{className:"mb-4 g-3",children:[e.jsx(d,{xl:6,lg:6,md:12,children:e.jsx(F,{})}),e.jsx(d,{xl:6,lg:12,md:12,children:e.jsx(B,{})})]}),e.jsxs(b,{className:"mb-4 g-3",children:[e.jsx(d,{xl:6,lg:6,md:12,children:e.jsx(T,{challenges:D(10),title:"Recent Challenges",showHeader:!0,maxHeight:"400px"})}),e.jsx(d,{xl:6,lg:12,md:12,children:e.jsx(R,{posts:n,title:"Recent Posts",showHeader:!0,maxHeight:"400px",isLoading:m,error:l,onTitleClick:()=>window.open("/social/hashtag-performance","_blank")})})]}),e.jsx(I,{})]})};export{ne as default};
