import{j as e,R as w,d as u,e as S,r as j,F as A}from"./index-DLm4JFzD.js";import{I as c}from"./IconifyIcon-M_ODdKUs.js";import{R as $}from"./react-apexcharts.min-U0B5yIcD.js";import{C as v,a as C,b as k}from"./Card-xWxgaJge.js";import{B as N,g as E}from"./mockData-_ikCo-Ka.js";import{S as L}from"./Spinner-DQYFGztu.js";import{B as b}from"./ListGroup-B7gHz_wy.js";import{f as M}from"./numberFormat-DtcdhD-a.js";import{P}from"./PageTitle-Bh2lDh8S.js";import{C as _}from"./campaignContentsService-DCiZN_AJ.js";import{C as D}from"./challengerService-BDC4ri3w.js";import"./warning-CW9ncNxS.js";import"./hook-OLjdxtxa.js";import"./extends-CF3RwP-h.js";import"./Nav-BWjpQg_D.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-D4m5FVPL.js";import"./useMergedRefs-DMmnj7--.js";import"./useEventCallback-CMRjiAT2.js";import"./Button-CTGKBfkc.js";const R=({count:a,icon:d,series:x,title:l,color:n="#7e67fe",trend:h="neutral",trendValue:i,onClick:g})=>{const p={chart:{type:"area",height:50,sparkline:{enabled:!0}},series:[{data:x}],stroke:{width:2,curve:"smooth"},markers:{size:0},colors:[n],tooltip:{fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:function(){return""}}},marker:{show:!1}},fill:{opacity:[1],type:["gradient"],gradient:{type:"vertical",inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,100]}}},y=()=>{switch(h){case"up":return"solar:arrow-up-broken";case"down":return"solar:arrow-down-broken";default:return"solar:minus-broken"}},s=()=>{switch(h){case"up":return"text-success";case"down":return"text-danger";default:return"text-muted"}};return e.jsxs(v,{className:`${g?"cursor-pointer":""} hover-shadow transition-all`,onClick:g,style:{cursor:g?"pointer":"default"},children:[e.jsx(C,{children:e.jsxs(w,{children:[e.jsxs(u,{xs:8,children:[e.jsx("p",{className:"text-muted mb-1 text-truncate",children:l}),e.jsx("h3",{className:"text-dark mt-1 mb-1",children:a}),i&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(c,{icon:y(),className:`fs-12 me-1 ${s()}`}),e.jsx("span",{className:`fs-12 ${s()}`,children:i})]})]}),e.jsx(u,{xs:4,children:e.jsx("div",{className:"ms-auto avatar-md rounded",style:{backgroundColor:`${n}20`},children:e.jsx(c,{style:{padding:"12px"},icon:d,className:"fs-32 avatar-title",color:n})})})]})}),e.jsx($,{options:p,series:p.series,height:50,type:"area"})]})},T=({cardsData:a,onCardClick:d})=>e.jsx(w,{className:"g-3",children:a.map((x,l)=>e.jsx(u,{sm:6,lg:4,children:e.jsx(R,{...x,onClick:d?()=>d(l,x):void 0})},l))}),F=a=>{const d=new Date(a),l=Math.floor((new Date().getTime()-d.getTime())/1e3);if(l<60)return"just now";if(l<3600){const n=Math.floor(l/60);return`${n} ${n===1?"minute":"minutes"} ago`}else if(l<86400){const n=Math.floor(l/3600);return`${n} ${n===1?"hour":"hours"} ago`}else{const n=Math.floor(l/86400);return`${n} ${n===1?"day":"days"} ago`}},H=({challengers:a,title:d="Recent Challengers",showHeader:x=!0,maxHeight:l="400px",isLoading:n=!1,error:h=null,onTitleClick:i})=>{const g=t=>{switch(t.toLowerCase()){case"weight loss":return"#ef4444";case"muscle building":return"#10b981";case"endurance":return"#f59e0b";case"flexibility":return"#8b5cf6";default:return"#6b7280"}},p=t=>{switch(t.toLowerCase()){case"weight loss":return"danger";case"muscle building":return"success";case"endurance":return"warning";case"flexibility":return"info";default:return"secondary"}},y=t=>{switch(t.toLowerCase()){case"vegetarian":return"solar:leaf-broken";case"keto":return"solar:fire-broken";case"high protein":return"solar:dumbbell-broken";case"low carb":return"solar:scale-broken";case"mediterranean":return"solar:planet-broken";default:return"solar:nutrition-broken"}},s=t=>t?"solar:check-circle-broken":"solar:pause-circle-broken",r=t=>t?"success":"secondary";return e.jsxs(v,{className:"h-100",children:[x&&e.jsxs(k,{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h5",{className:`card-title mb-0 ${i?"text-primary cursor-pointer":""}`,onClick:i,style:i?{cursor:"pointer"}:{},children:d}),e.jsx(N,{bg:"primary",pill:!0,children:a.length})]}),e.jsx(C,{className:"p-0",children:e.jsx("div",{style:{maxHeight:l,overflowY:"auto"},children:n?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(L,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading challengers..."})]}):h?e.jsxs("div",{className:"text-center py-4 text-danger",children:[e.jsx(c,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:h})]}):e.jsx(b,{variant:"flush",children:a.length===0?e.jsxs(b.Item,{className:"text-center py-4 text-muted",children:[e.jsx(c,{icon:"solar:users-group-two-rounded-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No challengers available"})]}):a.map(t=>e.jsx(b.Item,{className:"px-3 py-3",children:e.jsxs(w,{className:"align-items-start",children:[e.jsx(u,{xs:"auto",children:e.jsx("div",{className:"avatar-sm rounded-circle d-flex align-items-center justify-content-center",style:{backgroundColor:`${g(t.type)}20`},children:e.jsx(c,{icon:y(t.category),className:"fs-18",color:g(t.type)})})}),e.jsxs(u,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h6",{className:"mb-0 text-truncate flex-grow-1 me-2",children:t.name}),e.jsxs(N,{bg:r(t.isActive),className:"d-flex align-items-center",children:[e.jsx(c,{icon:s(t.isActive),className:"fs-12 me-1"}),t.isActive?"Active":"Inactive"]})]}),e.jsxs("p",{className:"text-muted mb-2 small",children:[e.jsx(c,{icon:"solar:phone-broken",className:"fs-12 me-1"}),t.mobile]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(N,{bg:p(t.type),className:"me-2",children:t.type}),e.jsx("span",{className:"text-muted small",children:t.category})]}),e.jsx("div",{className:"text-end",children:e.jsxs("div",{className:"text-primary fw-semibold small",children:[e.jsx(c,{icon:"solar:clock-circle-broken",className:"fs-12 me-1"}),t.duration]})})]}),t.subcategory&&e.jsx("div",{className:"mb-2",children:e.jsx(N,{bg:"light",text:"dark",className:"small",children:t.subcategory})}),t.createdAt&&e.jsxs("div",{className:"d-flex align-items-center text-muted small",children:[e.jsx(c,{icon:"solar:calendar-broken",className:"fs-12 me-1"}),"Created ",F(t.createdAt)]})]})]})},t._id))})})})]})},J=({posts:a,title:d="Recent Posts",showHeader:x=!0,maxHeight:l="400px",isLoading:n=!1,error:h=null,onTitleClick:i})=>{const g=s=>{const r=new Date(s*1e3),m=Math.floor((new Date().getTime()-r.getTime())/1e3);if(m<60)return"just now";if(m<3600){const f=Math.floor(m/60);return`${f} ${f===1?"minute":"minutes"} ago`}else if(m<86400){const f=Math.floor(m/3600);return`${f} ${f===1?"hour":"hours"} ago`}else{const f=Math.floor(m/86400);return`${f} ${f===1?"day":"days"} ago`}},p=(s,r=100)=>s.length>r?`${s.substring(0,r)}...`:s,y=s=>{const r=`https://www.instagram.com/${s}/#`;window.open(r,"_blank")};return e.jsxs(v,{className:"h-100",children:[x&&e.jsxs(k,{className:`d-flex align-items-center justify-content-between ${i?"user-select-none":""}`,style:{cursor:i?"pointer":"default",transition:i?"background-color 0.2s":"none"},onClick:i,title:i?"Click to open hashtag performance in new tab":"",onMouseEnter:s=>{i&&(s.currentTarget.style.backgroundColor="#f8f9fa")},onMouseLeave:s=>{i&&(s.currentTarget.style.backgroundColor="")},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0 me-2",children:d}),i&&e.jsx(c,{icon:"solar:external-link-broken",className:"fs-12 text-muted"})]}),e.jsx(N,{bg:"primary",pill:!0,children:a.length})]}),e.jsx(C,{className:"p-0",children:e.jsx("div",{style:{maxHeight:l,overflowY:"auto"},children:e.jsx(b,{variant:"flush",children:n?e.jsxs(b.Item,{className:"text-center py-4 text-muted",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading campaign posts..."})]}):h?e.jsxs(b.Item,{className:"text-center py-4 text-muted",children:[e.jsx(c,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2 text-danger"}),e.jsx("p",{className:"text-danger",children:h})]}):a.length===0?e.jsxs(b.Item,{className:"text-center py-4 text-muted",children:[e.jsx(c,{icon:"solar:document-text-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No campaign posts available"})]}):a.map(s=>e.jsx(b.Item,{className:"px-3 py-3",children:e.jsxs(w,{className:"align-items-start",children:[e.jsx(u,{xs:"auto",children:e.jsxs("div",{className:"rounded-circle overflow-hidden position-relative",style:{width:"40px",height:"40px",minWidth:"40px",minHeight:"40px"},children:[e.jsx("img",{src:s.influencer.profile_pic_url,alt:s.influencer.full_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:r=>{const t=r.target;t.style.display="none";const m=t.nextElementSibling;m&&(m.style.display="flex")}}),e.jsx("div",{style:{width:"100%",height:"100%",display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",position:"absolute",top:"0",left:"0"},children:e.jsx(c,{icon:"solar:user-broken",className:"fs-18 text-muted"})})]})}),e.jsxs(u,{children:[e.jsx("div",{className:"d-flex align-items-start justify-content-between mb-2",children:e.jsxs("div",{className:"flex-grow-1 me-2",children:[e.jsx("h6",{className:"mb-1 text-truncate",children:e.jsxs("span",{className:"text-primary",style:{cursor:"pointer",textDecoration:"none"},onClick:()=>y(s.influencer.username),onMouseEnter:r=>{r.currentTarget.style.textDecoration="underline"},onMouseLeave:r=>{r.currentTarget.style.textDecoration="none"},title:`Open @${s.influencer.username} on Instagram`,children:["@",s.influencer.username]})}),e.jsxs("div",{className:"d-flex align-items-center text-muted small mb-1",children:[e.jsxs("span",{className:"me-2",children:[" ",s.influencer.full_name]}),e.jsx(N,{bg:"outline-primary",text:"primary",className:"me-2",children:s.is_video?"Video":s.is_carousel?"Carousel":"Photo"})]})]})}),e.jsx("p",{className:"text-muted mb-2 small",children:p(s.caption)}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[s.hashtags.slice(0,2).map((r,t)=>e.jsx(N,{bg:"light",text:"dark",className:"me-1 small",children:r},t)),s.hashtags.length>2&&e.jsxs("span",{className:"text-muted small",children:["+",s.hashtags.length-2," more"]})]}),e.jsx("small",{className:"text-muted",children:g(s.created_timestamp)})]}),e.jsx("div",{className:"d-flex align-items-center justify-content-between",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(c,{icon:"solar:heart-broken",className:"fs-12 me-1 text-danger"}),e.jsx("span",{className:"small text-muted",children:s.total_likes})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(c,{icon:"solar:chat-round-line-broken",className:"fs-12 me-1 text-primary"}),e.jsx("span",{className:"small text-muted",children:s.total_comments})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(c,{icon:"solar:share-broken",className:"fs-12 me-1 text-success"}),e.jsx("span",{className:"small text-muted",children:s.reshare_count||0})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(c,{icon:"solar:eye-broken",className:"fs-12 me-1 text-muted"}),e.jsx("span",{className:"small text-muted",children:M(s.reach)})]})]})})]})]})},s._id))})})})]})},O=()=>{const a={chart:{type:"bar",height:350,toolbar:{show:!1}},series:[{name:"Completed",data:[8,12,15,18,22,25,28,32,35,38,42,45],color:"#10b981"},{name:"In Progress",data:[5,8,10,12,15,18,20,23,25,28,30,32],color:"#3b82f6"},{name:"Not Started",data:[12,18,22,25,28,30,32,35,38,40,42,45],color:"#6b7280"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(v,{children:[e.jsx(k,{children:e.jsx("h5",{className:"card-title mb-0",children:"Challenges Progress"})}),e.jsx(C,{children:e.jsx($,{options:a,series:a.series,type:"bar",height:350})})]})},B=()=>{const a={chart:{type:"area",height:350,toolbar:{show:!1}},series:[{name:"Published Posts",data:[5,8,12,15,18,22,25,28,32,35,38,42],color:"#f59e0b"},{name:"Draft Posts",data:[2,3,4,5,6,7,8,9,10,11,12,13],color:"#8b5cf6"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3,stops:[0,90,100]}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(v,{children:[e.jsx(k,{children:e.jsx("h5",{className:"card-title mb-0",children:"Posts Analytics"})}),e.jsx(C,{children:e.jsx($,{options:a,series:a.series,type:"area",height:350})})]})},oe=()=>{const a=S(),d=E(),[x,l]=j.useState([]),[n,h]=j.useState(!0),[i,g]=j.useState(null),[p,y]=j.useState([]),[s,r]=j.useState(!0),[t,m]=j.useState(null);j.useEffect(()=>{(async()=>{try{h(!0);const o=await _.getCampaignContents("daawatbiryani",1,10);o.success&&o.data.posts&&l(o.data.posts)}catch(o){g("Failed to fetch campaign contents"),console.error("Error fetching campaign contents:",o)}finally{h(!1)}})()},[]),j.useEffect(()=>{(async()=>{try{r(!0),m(null);const o=await D.getAllChallengers({limit:10,page:1});o.data&&y(o.data)}catch(o){m("Failed to fetch challengers"),console.error("Error fetching challengers:",o)}finally{r(!1)}})()},[]);const f=(I,o)=>{switch(o.title){case"Challenges Taken":a("/challengers");break;case"Total Posts":a("/posts");break;case"Completed Challenges":a("/challengers");break;default:console.log("Card clicked:",o.title)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{subName:"Daawat",title:"Dashboard Analytics"}),e.jsx("div",{className:"mb-4",children:e.jsx(T,{cardsData:d,onCardClick:f})}),e.jsxs(w,{className:"mb-4 g-3",children:[e.jsx(u,{xl:6,lg:6,md:12,children:e.jsx(O,{})}),e.jsx(u,{xl:6,lg:12,md:12,children:e.jsx(B,{})})]}),e.jsxs(w,{className:"mb-4 g-3",children:[e.jsx(u,{xl:6,lg:6,md:12,children:e.jsx(H,{challengers:p,title:"Recent Challengers",showHeader:!0,maxHeight:"400px",isLoading:s,error:t,onTitleClick:()=>window.open("/challengers","_blank")})}),e.jsx(u,{xl:6,lg:12,md:12,children:e.jsx(J,{posts:x,title:"Recent Posts",showHeader:!0,maxHeight:"400px",isLoading:n,error:i,onTitleClick:()=>window.open("/social/hashtag-performance","_blank")})})]}),e.jsx(A,{})]})};export{oe as default};
