import{r as b,d as _,j as e,e as I,R as N,f as p,h as E,F as L}from"./index-1uISpN7Y.js";import{I as m}from"./IconifyIcon-B2yq3Hdd.js";import{R as C}from"./react-apexcharts.min-R4rOLZcA.js";import{C as v,a as w,b as k}from"./Card-DlCpNF8U.js";import{B as y,g as R,a as A}from"./mockData-ZcC449Kr.js";import{B as j}from"./ListGroup-awlzUqe6.js";import{m as T}from"./ElementChildren-B_Ki7Cmd.js";import{P as B}from"./PageTitle-BYtupvZW.js";import{C as F}from"./campaignContentsService-DCiZN_AJ.js";import"./warning-DTU0IJ0f.js";import"./hook-Ba5igPx1.js";import"./extends-CF3RwP-h.js";import"./Nav-BL1jzwHl.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-IhtVjDF_.js";import"./useMergedRefs-Bqj7d0j9.js";import"./useEventCallback-DD-jBhVL.js";import"./Button-B-vZHhQu.js";const $=1e3;function H(a,i,n){const r=(a-i)/(n-i)*100;return Math.round(r*$)/$}function P({min:a,now:i,max:n,label:r,visuallyHidden:o,striped:d,animated:l,className:x,style:u,variant:t,bsPrefix:s,...c},g){return e.jsx("div",{ref:g,...c,role:"progressbar",className:I(x,`${s}-bar`,{[`bg-${t}`]:t,[`${s}-bar-animated`]:l,[`${s}-bar-striped`]:l||d}),style:{width:`${H(i,a,n)}%`,...u},"aria-valuenow":i,"aria-valuemin":a,"aria-valuemax":n,children:o?e.jsx("span",{className:"visually-hidden",children:r}):r})}const D=b.forwardRef(({isChild:a=!1,...i},n)=>{const r={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...i};if(r.bsPrefix=_(r.bsPrefix,"progress"),a)return P(r,n);const{min:o,now:d,max:l,label:x,visuallyHidden:u,striped:t,animated:s,bsPrefix:c,variant:g,className:h,children:f,...M}=r;return e.jsx("div",{ref:n,...M,className:I(h,c),children:f?T(f,S=>b.cloneElement(S,{isChild:!0})):P({min:o,now:d,max:l,label:x,visuallyHidden:u,striped:t,animated:s,bsPrefix:c,variant:g},n)})});D.displayName="ProgressBar";const O=({count:a,icon:i,series:n,title:r,color:o="#7e67fe",trend:d="neutral",trendValue:l,onClick:x})=>{const u={chart:{type:"area",height:50,sparkline:{enabled:!0}},series:[{data:n}],stroke:{width:2,curve:"smooth"},markers:{size:0},colors:[o],tooltip:{fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:function(){return""}}},marker:{show:!1}},fill:{opacity:[1],type:["gradient"],gradient:{type:"vertical",inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,100]}}},t=()=>{switch(d){case"up":return"solar:arrow-up-broken";case"down":return"solar:arrow-down-broken";default:return"solar:minus-broken"}},s=()=>{switch(d){case"up":return"text-success";case"down":return"text-danger";default:return"text-muted"}};return e.jsxs(v,{className:`${x?"cursor-pointer":""} hover-shadow transition-all`,onClick:x,style:{cursor:x?"pointer":"default"},children:[e.jsx(w,{children:e.jsxs(N,{children:[e.jsxs(p,{xs:8,children:[e.jsx("p",{className:"text-muted mb-1 text-truncate",children:r}),e.jsx("h3",{className:"text-dark mt-1 mb-1",children:a}),l&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(m,{icon:t(),className:`fs-12 me-1 ${s()}`}),e.jsx("span",{className:`fs-12 ${s()}`,children:l})]})]}),e.jsx(p,{xs:4,children:e.jsx("div",{className:"ms-auto avatar-md rounded",style:{backgroundColor:`${o}20`},children:e.jsx(m,{style:{padding:"12px"},icon:i,className:"fs-32 avatar-title",color:o})})})]})}),e.jsx(C,{options:u,series:u.series,height:50,type:"area"})]})},J=({cardsData:a,onCardClick:i})=>e.jsx(N,{className:"g-3",children:a.map((n,r)=>e.jsx(p,{sm:6,lg:4,children:e.jsx(O,{...n,onClick:i?()=>i(r,n):void 0})},r))}),z=a=>{const n=Math.floor((new Date().getTime()-a.getTime())/1e3);if(n<60)return"just now";if(n<3600){const r=Math.floor(n/60);return`${r} ${r===1?"minute":"minutes"} ago`}else if(n<86400){const r=Math.floor(n/3600);return`${r} ${r===1?"hour":"hours"} ago`}else{const r=Math.floor(n/86400);return`${r} ${r===1?"day":"days"} ago`}},U=({challenges:a,title:i="Active Challenges",showHeader:n=!0,maxHeight:r="400px"})=>{const o=t=>{switch(t){case"easy":return"#10b981";case"medium":return"#f59e0b";case"hard":return"#ef4444";default:return"#6b7280"}},d=t=>{switch(t){case"easy":return"success";case"medium":return"warning";case"hard":return"danger";default:return"secondary"}},l=t=>{switch(t){case"completed":return"success";case"in-progress":return"primary";case"failed":return"danger";default:return"secondary"}},x=t=>{switch(t){case"completed":return"solar:check-circle-broken";case"in-progress":return"solar:play-circle-broken";case"failed":return"solar:close-circle-broken";default:return"solar:pause-circle-broken"}},u=t=>{switch(t.toLowerCase()){case"programming":return"solar:code-broken";case"web design":return"solar:palette-broken";case"react":return"solar:atom-broken";case"backend":return"solar:server-broken";case"design":return"solar:magic-stick-3-broken";default:return"solar:bookmark-broken"}};return e.jsxs(v,{className:"h-100",children:[n&&e.jsxs(k,{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h5",{className:"card-title mb-0",children:i}),e.jsx(y,{bg:"primary",pill:!0,children:a.length})]}),e.jsx(w,{className:"p-0",children:e.jsx("div",{style:{maxHeight:r,overflowY:"auto"},children:e.jsx(j,{variant:"flush",children:a.length===0?e.jsxs(j.Item,{className:"text-center py-4 text-muted",children:[e.jsx(m,{icon:"solar:cup-star-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No challenges available"})]}):a.map(t=>e.jsx(j.Item,{className:"px-3 py-3",children:e.jsxs(N,{className:"align-items-start",children:[e.jsx(p,{xs:"auto",children:e.jsx("div",{className:"avatar-sm rounded-circle d-flex align-items-center justify-content-center",style:{backgroundColor:`${o(t.difficulty)}20`},children:e.jsx(m,{icon:u(t.category),className:"fs-18",color:o(t.difficulty)})})}),e.jsxs(p,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h6",{className:"mb-0 text-truncate flex-grow-1 me-2",children:t.title}),e.jsxs(y,{bg:l(t.status),className:"d-flex align-items-center",children:[e.jsx(m,{icon:x(t.status),className:"fs-12 me-1"}),t.status.replace("-"," ")]})]}),e.jsx("p",{className:"text-muted mb-2 small",children:t.description}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(y,{bg:d(t.difficulty),className:"me-2",children:t.difficulty}),e.jsx("span",{className:"text-muted small",children:t.category})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{className:"text-primary fw-semibold small",children:[t.points," pts"]}),e.jsxs("div",{className:"text-muted small",children:[t.participantCount," participants"]})]})]}),t.status==="in-progress"&&t.startDate&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsx("small",{className:"text-muted",children:"Progress"}),e.jsxs("small",{className:"text-muted",children:["Started ",z(t.startDate)]})]}),e.jsx(D,{now:65,variant:"primary",style:{height:"4px"}})]}),t.timeLimit&&e.jsxs("div",{className:"d-flex align-items-center text-muted small",children:[e.jsx(m,{icon:"solar:clock-circle-broken",className:"fs-12 me-1"}),t.timeLimit," minutes"]})]})]})},t.id))})})})]})},V=({posts:a,title:i="Recent Posts",showHeader:n=!0,maxHeight:r="400px",isLoading:o=!1,error:d=null,onTitleClick:l})=>{const x=s=>{const c=new Date(s*1e3),h=Math.floor((new Date().getTime()-c.getTime())/1e3);if(h<60)return"just now";if(h<3600){const f=Math.floor(h/60);return`${f} ${f===1?"minute":"minutes"} ago`}else if(h<86400){const f=Math.floor(h/3600);return`${f} ${f===1?"hour":"hours"} ago`}else{const f=Math.floor(h/86400);return`${f} ${f===1?"day":"days"} ago`}},u=(s,c=100)=>s.length>c?`${s.substring(0,c)}...`:s,t=s=>{const c=`https://www.instagram.com/${s}/#`;window.open(c,"_blank")};return e.jsxs(v,{className:"h-100",children:[n&&e.jsxs(k,{className:`d-flex align-items-center justify-content-between ${l?"user-select-none":""}`,style:{cursor:l?"pointer":"default",transition:l?"background-color 0.2s":"none"},onClick:l,title:l?"Click to open hashtag performance in new tab":"",onMouseEnter:s=>{l&&(s.currentTarget.style.backgroundColor="#f8f9fa")},onMouseLeave:s=>{l&&(s.currentTarget.style.backgroundColor="")},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0 me-2",children:i}),l&&e.jsx(m,{icon:"solar:external-link-broken",className:"fs-12 text-muted"})]}),e.jsx(y,{bg:"primary",pill:!0,children:a.length})]}),e.jsx(w,{className:"p-0",children:e.jsx("div",{style:{maxHeight:r,overflowY:"auto"},children:e.jsx(j,{variant:"flush",children:o?e.jsxs(j.Item,{className:"text-center py-4 text-muted",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading campaign posts..."})]}):d?e.jsxs(j.Item,{className:"text-center py-4 text-muted",children:[e.jsx(m,{icon:"solar:danger-circle-broken",className:"fs-48 mb-2 text-danger"}),e.jsx("p",{className:"text-danger",children:d})]}):a.length===0?e.jsxs(j.Item,{className:"text-center py-4 text-muted",children:[e.jsx(m,{icon:"solar:document-text-broken",className:"fs-48 mb-2"}),e.jsx("p",{children:"No campaign posts available"})]}):a.map(s=>e.jsx(j.Item,{className:"px-3 py-3",children:e.jsxs(N,{className:"align-items-start",children:[e.jsx(p,{xs:"auto",children:e.jsxs("div",{className:"rounded-circle overflow-hidden position-relative",style:{width:"40px",height:"40px",minWidth:"40px",minHeight:"40px"},children:[e.jsx("img",{src:s.influencer.profile_pic_url,alt:s.influencer.full_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:c=>{const g=c.target;g.style.display="none";const h=g.nextElementSibling;h&&(h.style.display="flex")}}),e.jsx("div",{style:{width:"100%",height:"100%",display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",position:"absolute",top:"0",left:"0"},children:e.jsx(m,{icon:"solar:user-broken",className:"fs-18 text-muted"})})]})}),e.jsxs(p,{children:[e.jsx("div",{className:"d-flex align-items-start justify-content-between mb-2",children:e.jsxs("div",{className:"flex-grow-1 me-2",children:[e.jsx("h6",{className:"mb-1 text-truncate",children:e.jsxs("span",{className:"text-primary",style:{cursor:"pointer",textDecoration:"none"},onClick:()=>t(s.influencer.username),onMouseEnter:c=>{c.currentTarget.style.textDecoration="underline"},onMouseLeave:c=>{c.currentTarget.style.textDecoration="none"},title:`Open @${s.influencer.username} on Instagram`,children:["@",s.influencer.username]})}),e.jsxs("div",{className:"d-flex align-items-center text-muted small mb-1",children:[e.jsxs("span",{className:"me-2",children:[" ",s.influencer.full_name]}),e.jsx(y,{bg:"outline-primary",text:"primary",className:"me-2",children:s.is_video?"Video":s.is_carousel?"Carousel":"Photo"})]})]})}),e.jsx("p",{className:"text-muted mb-2 small",children:u(s.caption)}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[s.hashtags.slice(0,2).map((c,g)=>e.jsx(y,{bg:"light",text:"dark",className:"me-1 small",children:c},g)),s.hashtags.length>2&&e.jsxs("span",{className:"text-muted small",children:["+",s.hashtags.length-2," more"]})]}),e.jsx("small",{className:"text-muted",children:x(s.created_timestamp)})]}),e.jsx("div",{className:"d-flex align-items-center justify-content-between",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(m,{icon:"solar:heart-broken",className:"fs-12 me-1 text-danger"}),e.jsx("span",{className:"small text-muted",children:s.total_likes})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(m,{icon:"solar:chat-round-line-broken",className:"fs-12 me-1 text-primary"}),e.jsx("span",{className:"small text-muted",children:s.total_comments})]}),e.jsxs("div",{className:"d-flex align-items-center me-3",children:[e.jsx(m,{icon:"solar:share-broken",className:"fs-12 me-1 text-success"}),e.jsx("span",{className:"small text-muted",children:s.reshare_count||0})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(m,{icon:"solar:eye-broken",className:"fs-12 me-1 text-muted"}),e.jsx("span",{className:"small text-muted",children:s.reach})]})]})})]})]})},s._id))})})})]})},W=()=>{const a={chart:{type:"bar",height:350,toolbar:{show:!1}},series:[{name:"Completed",data:[8,12,15,18,22,25,28,32,35,38,42,45],color:"#10b981"},{name:"In Progress",data:[5,8,10,12,15,18,20,23,25,28,30,32],color:"#3b82f6"},{name:"Not Started",data:[12,18,22,25,28,30,32,35,38,40,42,45],color:"#6b7280"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(v,{children:[e.jsx(k,{children:e.jsx("h5",{className:"card-title mb-0",children:"Challenges Progress"})}),e.jsx(w,{children:e.jsx(C,{options:a,series:a.series,type:"bar",height:350})})]})},Y=()=>{const a={chart:{type:"area",height:350,toolbar:{show:!1}},series:[{name:"Published Posts",data:[5,8,12,15,18,22,25,28,32,35,38,42],color:"#f59e0b"},{name:"Draft Posts",data:[2,3,4,5,6,7,8,9,10,11,12,13],color:"#8b5cf6"}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#8e8da4"}}},yaxis:{labels:{style:{colors:"#8e8da4"}}},grid:{borderColor:"#f1f3fa"},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3,stops:[0,90,100]}},dataLabels:{enabled:!1},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark"}};return e.jsxs(v,{children:[e.jsx(k,{children:e.jsx("h5",{className:"card-title mb-0",children:"Posts Analytics"})}),e.jsx(w,{children:e.jsx(C,{options:a,series:a.series,type:"area",height:350})})]})},xe=()=>{const a=E(),i=R(),[n,r]=b.useState([]),[o,d]=b.useState(!0),[l,x]=b.useState(null);b.useEffect(()=>{(async()=>{try{d(!0);const s=await F.getCampaignContents("daawatbiryani",1,10);s.success&&s.data.posts&&r(s.data.posts)}catch(s){x("Failed to fetch campaign contents"),console.error("Error fetching campaign contents:",s)}finally{d(!1)}})()},[]);const u=(t,s)=>{switch(s.title){case"Challenges Taken":a("/challengers");break;case"Total Posts":a("/posts");break;case"Completed Challenges":a("/challengers");break;default:console.log("Card clicked:",s.title)}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{subName:"Daawat",title:"Dashboard Analytics"}),e.jsx("div",{className:"mb-4",children:e.jsx(J,{cardsData:i,onCardClick:u})}),e.jsxs(N,{className:"mb-4 g-3",children:[e.jsx(p,{xl:6,lg:6,md:12,children:e.jsx(W,{})}),e.jsx(p,{xl:6,lg:12,md:12,children:e.jsx(Y,{})})]}),e.jsxs(N,{className:"mb-4 g-3",children:[e.jsx(p,{xl:6,lg:6,md:12,children:e.jsx(U,{challenges:A(10),title:"Recent Challenges",showHeader:!0,maxHeight:"400px"})}),e.jsx(p,{xl:6,lg:12,md:12,children:e.jsx(V,{posts:n,title:"Recent Posts",showHeader:!0,maxHeight:"400px",isLoading:o,error:l,onTitleClick:()=>window.open("/social/hashtag-performance","_blank")})})]}),e.jsx(L,{})]})};export{xe as default};
