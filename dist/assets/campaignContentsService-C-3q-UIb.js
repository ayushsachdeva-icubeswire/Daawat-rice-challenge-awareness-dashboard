const $=(s,c)=>{const t=s.length,r=s.reduce((e,n)=>e+n.total_likes,0),a=s.reduce((e,n)=>e+n.total_comments,0),o=s.reduce((e,n)=>e+(n.reshare_count||0),0),p=s.reduce((e,n)=>e+(n.total_play||0),0),i=s.reduce((e,n)=>e+n.reach,0),l=r+a+o,m=t>0?l/t:0,g=new Map;s.forEach(e=>{var u;const n=((u=e.influencer._id)==null?void 0:u.$oid)||e.influencer_id;g.has(n)||g.set(n,e.influencer)});const d=Array.from(g.values()).slice(0,5),h=s,f="Instagram",y=(h.length>0?h.reduce((e,n)=>e+n.total_likes+n.total_comments,0)/h.length:0)>m*1.2||t>20;return{hashtag:`#${c}`,platform:f,posts:t,reach:i,engagement:l,impressions:p+i,trending:y,totalLikes:r,totalComments:a,totalShares:o,totalPlays:p,avgEngagementRate:m,topInfluencers:d,recentPosts:h}};class E{static async getCampaignContents(c="onlyricenovember",t=1,r=8){try{const a=await fetch(`https://apis.icubeswire.co/api/v1/campaign-contents?page=${t}&limit=${r}&hashtags[0]=${c}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)throw new Error(`API call failed: ${a.status} ${a.statusText}`);return await a.json()}catch(a){throw console.error("Error fetching campaign contents:",a),a}}static async getMultipleHashtagsPerformance(c=["onlyricenovember","RiceYourAwareness","OnlyDaawatNovember"],t=1,r=8){try{const a=c.map((i,l)=>`hashtags[${l}]=${i}`).join("&"),o=await fetch(`https://apis.icubeswire.co/api/v1/campaign-contents?page=${t}&limit=${r}&${a}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!o.ok)throw new Error(`API call failed: ${o.status} ${o.statusText}`);return await o.json()}catch(a){throw console.error("Error fetching multiple hashtags performance:",a),a}}static async getCampaignAnalysis(c="onlyricenovember"){try{const t=await fetch(`https://apis.icubeswire.co/api/v1/campaign-contents/analysis?hashtags[0]=${c}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`API call failed: ${t.status} ${t.statusText}`);return{success:!0,data:await t.json(),message:"Campaign analysis data retrieved successfully"}}catch(t){throw console.error("Error fetching campaign analysis:",t),t}}}export{E as C,$ as p};
